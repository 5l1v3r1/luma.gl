{"version":3,"sources":["webpack:///../modules/core/src/scenegraph/nodes/model-node.js","webpack:///../node_modules/mjolnir.js/dist/esm/utils/globals.js","webpack:///../examples/lessons/10/world.js","webpack:///../examples/lessons/10/app.js","webpack:///./templates/lessons/example-10.jsx","webpack:///../node_modules/hammerjs/hammer.js","webpack:///../modules/core/src/scenegraph/nodes/scenegraph-node.js","webpack:///../node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","webpack:///../node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","webpack:///../node_modules/mjolnir.js/dist/esm/constants.js","webpack:///../node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","webpack:///../node_modules/mjolnir.js/dist/esm/inputs/move-input.js","webpack:///../node_modules/mjolnir.js/dist/esm/inputs/key-input.js","webpack:///../node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","webpack:///../node_modules/mjolnir.js/dist/esm/utils/event-utils.js","webpack:///../node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","webpack:///../node_modules/mjolnir.js/dist/esm/event-manager.js","webpack:///../node_modules/mjolnir.js/dist/esm/utils/hammer-manager-mock.js","webpack:///../node_modules/mjolnir.js/dist/esm/index.js","webpack:///../node_modules/math.gl/dist/esm/classes/base/vector.js","webpack:///../node_modules/math.gl/dist/esm/classes/vector3.js"],"names":["ModelNode","props","gl","setProps","this","_setModelNodeProps","delete","model","managedResources","forEach","resource","draw","setUniforms","setAttributes","updateModuleSettings","ScenegraphNode","userAgent","navigator","toLowerCase","window_","window","global","passiveSupported","document","options","addEventListener","removeEventListener","err","VERTEX_SHADER","FRAGMENT_SHADER","World","opts","program","fs","vs","geometry","uniforms","uSampler","texture","cameraInfo","pitch","pitchRate","yaw","yawRate","xPos","yPos","zPos","speed","joggingAngle","direction","timeLine","lastTime","currentlyPressedKeys","AppAnimationLoop","getInfo","onInitialize","canvas","eventManager","addKeyboardHandler","keydown","e","keyup","mouseDown","currentX","currentY","panstart","panend","panmove","dx","dy","addMouseHandler","setParameters","clearColor","clearDepth","depthTest","data","parameters","file","lines","vertexPositions","vertexTextureCoords","vals","parseFloat","vertexCount","attributes","positions","Float32Array","texCoords","loadWorldGeometry","world","onRender","aspect","tick","eyePos","centerPos","radians","val","uMVMatrix","eye","center","up","handleKeys","timeNow","Date","elapsed","Math","animate","GL","uPMatrix","fov","near","far","onFinalize","destroy","AnimationLoop","animationLoop","Example","render","exampleConfig","pageContext","React","Component","exportName","undefined","assign","VENDOR_PREFIXES","TEST_ELEMENT","createElement","TYPE_FUNCTION","round","abs","now","setTimeoutContext","fn","timeout","context","setTimeout","bindFn","invokeArrayArg","arg","Array","isArray","each","obj","iterator","i","length","call","hasOwnProperty","deprecate","method","name","message","deprecationMessage","Error","stack","replace","log","console","warn","apply","arguments","Object","target","TypeError","output","index","source","nextKey","extend","dest","src","merge","keys","inherit","child","base","properties","childP","baseP","prototype","create","constructor","_super","boolOrFn","args","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","type","removeEventListeners","hasParent","node","parent","parentNode","inStr","str","find","indexOf","trim","split","inArray","findByKey","toArray","slice","uniqueArray","key","sort","results","values","push","a","b","prefixed","property","prefix","prop","camelProp","toUpperCase","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","test","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","self","inputTarget","domHandler","ev","enable","init","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","angle","getAngle","distance","getDistance","offset","offsetDelta","prevDelta","prevInput","x","deltaX","y","deltaY","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","scale","start","end","rotation","getRotation","maxPointers","velocity","velocityX","velocityY","last","lastInterval","v","computeIntervalInputData","srcEvent","computeInputData","emit","recognize","clientX","clientY","p1","p2","sqrt","atan2","PI","evEl","evTarget","evWin","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","MouseInput","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","splice","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","concat","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","TouchInput","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","filter","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","TouchMouseInput","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","isSyntheticEvent","t","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","style","NATIVE_TOUCH_ACTION","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","value","set","compute","actions","update","touchAction","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","cleanTouchActions","join","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","Recognizer","defaults","id","state","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","get","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","preset","Manager","recognizeWith","dropRecognizeWith","requireFailure","dropRequireFailure","hasRequireFailures","canRecognizeWith","event","additionalEvent","tryEmit","canEmit","inputDataClone","reset","process","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","inputClass","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","handlers","oldCssProps","toggleCssProps","item","add","stop","force","stopped","curRecognizer","existing","remove","on","events","off","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","STATE_FAILED","Tap","Pan","Swipe","Pinch","Rotate","Press","uid","display","position","matrix","userData","_setScenegraphNodeProps","toString","setPosition","assert","setRotation","setScale","setMatrix","copyMatrix","copy","setMatrixComponents","updateMatrix","pos","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","oldHandler","hammerjs","array","predict","some","RECOGNIZERS","RECOGNIZER_COMPATIBLE_MAP","rotate","pan","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","INPUT_EVENT_TYPES","EVENT_RECOGNIZER_MAP","tap","press","pinch","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","panup","pandown","panleft","panright","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","click","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","WHEEL_EVENTS","WheelInput","_this","handleEvent","bind","passive","_this2","enabled","WheelEvent","deltaMode","DOM_DELTA_PIXEL","devicePixelRatio","DOM_DELTA_LINE","wheelPosition","floor","shiftKey","_onWheel","delta","MOUSE_EVENTS","MoveInput","enableMoveEvent","enableLeaveEvent","enableOutEvent","enableOverEvent","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","KEY_EVENTS","KeyInput","enableDownEvent","enableUpEvent","tabIndex","outline","targetElement","srcElement","tagName","ContextmenuInput","DOWN_EVENT","MOVE_EVENT","UP_EVENT","MOUSE_EVENT_WHICH_LEFT","MOUSE_EVENT_WHICH_MIDDLE","MOUSE_EVENT_WHICH_RIGHT","MOUSE_EVENT_BUTTON_LEFT","MOUSE_EVENT_BUTTON_MIDDLE","MOUSE_EVENT_BUTTON_RIGHT","MOUSE_EVENT_BUTTONS_LEFT_MASK","MOUSE_EVENT_BUTTONS_RIGHT_MASK","MOUSE_EVENT_BUTTONS_MIDDLE_MASK","EventRegistrar","handlersByElement","Map","has","entry","entries","isEmpty","mjolnirEvent","_normalizeEvent","rootElement","_emit","handled","immediatePropagationStopped","stopPropagation","stopImmediatePropagation","_entries$i","_event$srcEvent","buttons","leftButton","middleButton","rightButton","Number","isFinite","Boolean","whichButtons","rect","getBoundingClientRect","scaleX","width","offsetWidth","scaleY","height","offsetHeight","left","clientLeft","top","clientTop","getOffsetPosition","DEFAULT_OPTIONS","recognizerOptions","m","instance","chainedNoop","EventManager","_onBasicInput","_onOtherEvent","setElement","ManagerClass","recognizerName","otherName","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","next","done","_step$value","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","eventName","_removeEventHandler","fallbackRecognizers","enableEventType","isRecognizerUsed","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","eh","alias","_MathArray","Vector","lengthSquared","len","ELEMENTS","mathArray","distanceSquared","dist","product","magnitude","check","_len","vectors","_key","_i","_vectors","vector","_len2","_key2","_i2","_vectors2","subtract","multiply","multiplyScalar","ORIGIN","_Vector","Vector3","z","debug","object","vec3","_ref","_ref$origin","origin","_ref2","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","quaternion"],"mappings":"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","file":"component---templates-lessons-example-10-jsx-40867cf2162689beec10.js","sourcesContent":["import Model from '../../lib/model';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global'\n\n/* global window, global, document, navigator */\nexport var userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nvar window_ = typeof window !== 'undefined' ? window : global;\nvar global_ = typeof global !== 'undefined' ? global : window;\nvar document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\n/*\n * Detect whether passive option is supported by the current browser.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n   #Safely_detecting_option_support\n */\n\nvar passiveSupported = false;\n/* eslint-disable accessor-pairs, no-empty */\n\ntry {\n  var options = {\n    // This function will be called when the browser\n    // attempts to access the passive property.\n    get passive() {\n      passiveSupported = true;\n    }\n\n  };\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport { passiveSupported };","import {Program, Geometry, ModelNode} from '@luma.gl/core';\n\nconst VERTEX_SHADER = `\\\nattribute vec3 positions;\nattribute vec2 texCoords;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * vec4(positions, 1.0);\n  vTextureCoord = texCoords;\n}\n`;\n\nconst FRAGMENT_SHADER = `\\\nprecision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void) {\n  gl_FragColor = vec4(texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t)).rgb, 1.0);\n}\n`;\n\nfunction loadWorldGeometry(data) {\n  const lines = data.split('\\n');\n  const vertexPositions = [];\n  const vertexTextureCoords = [];\n  for (const i in lines) {\n    const vals = lines[i].replace(/^\\s+/, '').split(/\\s+/);\n    if (vals.length === 5 && vals[0] !== '//') {\n      // It is a line describing a vertex; get X, Y and Z first\n      vertexPositions.push(parseFloat(vals[0]));\n      vertexPositions.push(parseFloat(vals[1]));\n      vertexPositions.push(parseFloat(vals[2]));\n      // And then the texture coords\n      vertexTextureCoords.push(parseFloat(vals[3]));\n      vertexTextureCoords.push(parseFloat(vals[4]));\n    }\n  }\n  return new Geometry({\n    vertexCount: vertexPositions.length / 3,\n    attributes: {\n      positions: new Float32Array(vertexPositions),\n      texCoords: new Float32Array(vertexTextureCoords)\n    }\n  });\n}\n\nexport class World extends ModelNode {\n  constructor(opts = {}) {\n    const program = new Program(opts.gl, {\n      fs: FRAGMENT_SHADER,\n      vs: VERTEX_SHADER\n    });\n\n    super(opts.gl, {\n      program,\n      geometry: opts.geometry,\n      uniforms: {\n        uSampler: opts.texture\n      }\n    });\n  }\n}\n\nexport {loadWorldGeometry};\n","import GL from '@luma.gl/constants';\nimport {AnimationLoop, Texture2D, loadFile, setParameters} from '@luma.gl/core';\nimport {Matrix4, radians} from 'math.gl';\nimport {loadWorldGeometry, World} from './world';\nimport {EventManager} from 'mjolnir.js';\n/* eslint-disable complexity */\n\n/*\n  Cave texture from: http://texturelib.com/texture/?path=/Textures/rock/cave/rock_cave_0019\n  \"Free for personal and commercial use.\" http://texturelib.com/about/\n*/\n\nconst INFO_HTML = `\n<p>\n  <a href=\"http://learningwebgl.com/blog/?p=1067\" target=\"_blank\">\n    Loading a world, and the most basic kind of camera\n  </a>\n\n  </br>\n  </br>\n  Use the cursor keys or WASD to run around, and <code>+</code>/<code>-</code> to look up and down.\n<p>\nThe classic WebGL Lessons in luma.gl\n`;\n\nconst cameraInfo = {\n  pitch: 0,\n  pitchRate: 0,\n  yaw: 0,\n  yawRate: 0,\n  xPos: 0,\n  yPos: 0.4,\n  zPos: 0,\n  speed: 0,\n  joggingAngle: 0, // Used to make us \"jog\" up and down as we move forward.\n  direction: [0, 0, -1]\n};\n\nconst timeLine = {\n  lastTime: 0\n};\n\nconst currentlyPressedKeys = {};\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  onInitialize({canvas, gl}) {\n    // Use mjolnir.js (hammer.js)'s EventManager to handle gestures on both\n    // desktop and mobile\n    this.eventManager = new EventManager(canvas);\n    addKeyboardHandler(this.eventManager);\n    addMouseHandler(this.eventManager);\n\n    setParameters(gl, {\n      clearColor: [0, 0, 0, 1],\n      clearDepth: 1,\n      depthTest: true\n    });\n\n    const texture = new Texture2D(gl, {\n      data: 'cave.jpg',\n      parameters: {\n        [gl.TEXTURE_WRAP_S]: gl.MIRRORED_REPEAT,\n        [gl.TEXTURE_WRAP_T]: gl.MIRRORED_REPEAT\n      }\n    });\n\n    return loadFile('world.txt').then(file => {\n      const geometry = loadWorldGeometry(file);\n      const world = new World({\n        gl,\n        geometry,\n        texture\n      });\n      return {world};\n    });\n  }\n\n  onRender({gl, tick, aspect, world}) {\n    // Update Camera Position\n    const eyePos = [cameraInfo.xPos, cameraInfo.yPos, cameraInfo.zPos];\n    const centerPos = new Matrix4()\n      .rotateX(radians(cameraInfo.pitch))\n      .rotateY(radians(cameraInfo.yaw))\n      .transform(cameraInfo.direction)\n      .map((val, i) => val + eyePos[i]);\n\n    const uMVMatrix = new Matrix4().lookAt({eye: eyePos, center: centerPos, up: [0, 1, 0]});\n\n    handleKeys(cameraInfo, currentlyPressedKeys);\n    animate(cameraInfo, timeLine);\n\n    gl.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);\n\n    return world\n      .setUniforms({\n        uMVMatrix,\n        uPMatrix: new Matrix4().perspective({\n          fov: (45 * Math.PI) / 180,\n          aspect,\n          near: 0.1,\n          far: 100\n        })\n      })\n      .draw();\n  }\n\n  onFinalize() {\n    this.eventManager.destroy();\n  }\n}\n\nfunction addKeyboardHandler(eventManager) {\n  eventManager.on({\n    keydown(e) {\n      currentlyPressedKeys[e.srcEvent.code] = true;\n    },\n    keyup(e) {\n      currentlyPressedKeys[e.srcEvent.code] = false;\n    }\n  });\n}\n\nfunction addMouseHandler(eventManager) {\n  let mouseDown = false;\n  let currentX = 0;\n  let currentY = 0;\n\n  eventManager.on({\n    panstart(e) {\n      mouseDown = true;\n      currentX = e.offsetCenter.x;\n      currentY = e.offsetCenter.y;\n    },\n    panend() {\n      mouseDown = false;\n    },\n    panmove(e) {\n      if (!mouseDown) {\n        return;\n      }\n      const dx = e.offsetCenter.x - currentX;\n      const dy = e.offsetCenter.y - currentY;\n      cameraInfo.yaw += dx * 0.1;\n      cameraInfo.pitch += dy * 0.1;\n      currentX = e.offsetCenter.x;\n      currentY = e.offsetCenter.y;\n    }\n  });\n}\n\nfunction handleKeys() {\n  if (currentlyPressedKeys.PageUp || currentlyPressedKeys.Equal) {\n    cameraInfo.pitchRate = 0.1;\n  } else if (currentlyPressedKeys.PageDown || currentlyPressedKeys.Minus) {\n    cameraInfo.pitchRate = -0.1;\n  } else {\n    cameraInfo.pitchRate = 0;\n  }\n  if (currentlyPressedKeys.ArrowLeft || currentlyPressedKeys.KeyA) {\n    cameraInfo.yawRate = 0.1;\n  } else if (currentlyPressedKeys.ArrowRight || currentlyPressedKeys.KeyD) {\n    cameraInfo.yawRate = -0.1;\n  } else {\n    cameraInfo.yawRate = 0;\n  }\n  if (currentlyPressedKeys.ArrowUp || currentlyPressedKeys.KeyW) {\n    cameraInfo.speed = 0.003;\n  } else if (currentlyPressedKeys.ArrowDown || currentlyPressedKeys.KeyS) {\n    cameraInfo.speed = -0.003;\n  } else {\n    cameraInfo.speed = 0;\n  }\n}\n\nfunction animate() {\n  const timeNow = new Date().getTime();\n  if (timeLine.lastTime !== 0) {\n    const elapsed = timeNow - timeLine.lastTime;\n    if (cameraInfo.speed !== 0) {\n      cameraInfo.xPos -= Math.sin(radians(cameraInfo.yaw)) * cameraInfo.speed * elapsed;\n      cameraInfo.zPos -= Math.cos(radians(cameraInfo.yaw)) * cameraInfo.speed * elapsed;\n      cameraInfo.joggingAngle += elapsed * 0.6; // 0.6 \"fiddle factor\" - feel more realistic :-)\n      cameraInfo.yPos = Math.sin(radians(cameraInfo.joggingAngle)) / 20 + 0.4;\n    }\n    cameraInfo.yaw += cameraInfo.yawRate * elapsed;\n    cameraInfo.pitch += cameraInfo.pitchRate * elapsed;\n  }\n  timeLine.lastTime = timeNow;\n}\n\n/* global window */\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/lessons/10/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","require(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function (window, document, exportName, undefined) {\n  'use strict';\n\n  var VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\n  var TEST_ELEMENT = document.createElement('div');\n  var TYPE_FUNCTION = 'function';\n  var round = Math.round;\n  var abs = Math.abs;\n  var now = Date.now;\n  /**\n   * set a timeout with a given scope\n   * @param {Function} fn\n   * @param {Number} timeout\n   * @param {Object} context\n   * @returns {number}\n   */\n\n  function setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n  }\n  /**\n   * if the argument is an array, we want to execute the fn on each entry\n   * if it aint an array we don't want to do a thing.\n   * this is used by all the methods that accept a single and array argument.\n   * @param {*|Array} arg\n   * @param {String} fn\n   * @param {Object} [context]\n   * @returns {Boolean}\n   */\n\n\n  function invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n      each(arg, context[fn], context);\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * walk objects and arrays\n   * @param {Object} obj\n   * @param {Function} iterator\n   * @param {Object} context\n   */\n\n\n  function each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n      return;\n    }\n\n    if (obj.forEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n      i = 0;\n\n      while (i < obj.length) {\n        iterator.call(context, obj[i], i, obj);\n        i++;\n      }\n    } else {\n      for (i in obj) {\n        obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n      }\n    }\n  }\n  /**\n   * wrap a method with a deprecation warning and stack trace\n   * @param {Function} method\n   * @param {String} name\n   * @param {String} message\n   * @returns {Function} A new function wrapping the supplied method.\n   */\n\n\n  function deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function () {\n      var e = new Error('get-stack-trace');\n      var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '').replace(/^\\s+at\\s+/gm, '').replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n      var log = window.console && (window.console.warn || window.console.log);\n\n      if (log) {\n        log.call(window.console, deprecationMessage, stack);\n      }\n\n      return method.apply(this, arguments);\n    };\n  }\n  /**\n   * extend object.\n   * means that properties in dest will be overwritten by the ones in src.\n   * @param {Object} target\n   * @param {...Object} objects_to_assign\n   * @returns {Object} target\n   */\n\n\n  var assign;\n\n  if (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var output = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index];\n\n        if (source !== undefined && source !== null) {\n          for (var nextKey in source) {\n            if (source.hasOwnProperty(nextKey)) {\n              output[nextKey] = source[nextKey];\n            }\n          }\n        }\n      }\n\n      return output;\n    };\n  } else {\n    assign = Object.assign;\n  }\n  /**\n   * extend object.\n   * means that properties in dest will be overwritten by the ones in src.\n   * @param {Object} dest\n   * @param {Object} src\n   * @param {Boolean} [merge=false]\n   * @returns {Object} dest\n   */\n\n\n  var extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n\n    while (i < keys.length) {\n      if (!merge || merge && dest[keys[i]] === undefined) {\n        dest[keys[i]] = src[keys[i]];\n      }\n\n      i++;\n    }\n\n    return dest;\n  }, 'extend', 'Use `assign`.');\n  /**\n   * merge the values from src in the dest.\n   * means that properties that exist in dest will not be overwritten by src\n   * @param {Object} dest\n   * @param {Object} src\n   * @returns {Object} dest\n   */\n\n  var merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n  }, 'merge', 'Use `assign`.');\n  /**\n   * simple class inheritance\n   * @param {Function} child\n   * @param {Function} base\n   * @param {Object} [properties]\n   */\n\n  function inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n      assign(childP, properties);\n    }\n  }\n  /**\n   * simple function bind\n   * @param {Function} fn\n   * @param {Object} context\n   * @returns {Function}\n   */\n\n\n  function bindFn(fn, context) {\n    return function boundFn() {\n      return fn.apply(context, arguments);\n    };\n  }\n  /**\n   * let a boolean value also be a function that must return a boolean\n   * this first item in args will be used as the context\n   * @param {Boolean|Function} val\n   * @param {Array} [args]\n   * @returns {Boolean}\n   */\n\n\n  function boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n      return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n\n    return val;\n  }\n  /**\n   * use the val2 when val1 is undefined\n   * @param {*} val1\n   * @param {*} val2\n   * @returns {*}\n   */\n\n\n  function ifUndefined(val1, val2) {\n    return val1 === undefined ? val2 : val1;\n  }\n  /**\n   * addEventListener with multiple events at once\n   * @param {EventTarget} target\n   * @param {String} types\n   * @param {Function} handler\n   */\n\n\n  function addEventListeners(target, types, handler) {\n    each(splitStr(types), function (type) {\n      target.addEventListener(type, handler, false);\n    });\n  }\n  /**\n   * removeEventListener with multiple events at once\n   * @param {EventTarget} target\n   * @param {String} types\n   * @param {Function} handler\n   */\n\n\n  function removeEventListeners(target, types, handler) {\n    each(splitStr(types), function (type) {\n      target.removeEventListener(type, handler, false);\n    });\n  }\n  /**\n   * find if a node is in the given parent\n   * @method hasParent\n   * @param {HTMLElement} node\n   * @param {HTMLElement} parent\n   * @return {Boolean} found\n   */\n\n\n  function hasParent(node, parent) {\n    while (node) {\n      if (node == parent) {\n        return true;\n      }\n\n      node = node.parentNode;\n    }\n\n    return false;\n  }\n  /**\n   * small indexOf wrapper\n   * @param {String} str\n   * @param {String} find\n   * @returns {Boolean} found\n   */\n\n\n  function inStr(str, find) {\n    return str.indexOf(find) > -1;\n  }\n  /**\n   * split string on whitespace\n   * @param {String} str\n   * @returns {Array} words\n   */\n\n\n  function splitStr(str) {\n    return str.trim().split(/\\s+/g);\n  }\n  /**\n   * find if a array contains the object using indexOf or a simple polyFill\n   * @param {Array} src\n   * @param {String} find\n   * @param {String} [findByKey]\n   * @return {Boolean|Number} false when not found, or the index\n   */\n\n\n  function inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n      return src.indexOf(find);\n    } else {\n      var i = 0;\n\n      while (i < src.length) {\n        if (findByKey && src[i][findByKey] == find || !findByKey && src[i] === find) {\n          return i;\n        }\n\n        i++;\n      }\n\n      return -1;\n    }\n  }\n  /**\n   * convert array-like objects to real arrays\n   * @param {Object} obj\n   * @returns {Array}\n   */\n\n\n  function toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n  }\n  /**\n   * unique array with objects based on a key (like 'id') or just by the array's value\n   * @param {Array} src [{id:1},{id:2},{id:1}]\n   * @param {String} [key]\n   * @param {Boolean} [sort=False]\n   * @returns {Array} [{id:1},{id:2}]\n   */\n\n\n  function uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n      var val = key ? src[i][key] : src[i];\n\n      if (inArray(values, val) < 0) {\n        results.push(src[i]);\n      }\n\n      values[i] = val;\n      i++;\n    }\n\n    if (sort) {\n      if (!key) {\n        results = results.sort();\n      } else {\n        results = results.sort(function sortUniqueArray(a, b) {\n          return a[key] > b[key];\n        });\n      }\n    }\n\n    return results;\n  }\n  /**\n   * get the prefixed property\n   * @param {Object} obj\n   * @param {String} property\n   * @returns {String|Undefined} prefixed\n   */\n\n\n  function prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n    var i = 0;\n\n    while (i < VENDOR_PREFIXES.length) {\n      prefix = VENDOR_PREFIXES[i];\n      prop = prefix ? prefix + camelProp : property;\n\n      if (prop in obj) {\n        return prop;\n      }\n\n      i++;\n    }\n\n    return undefined;\n  }\n  /**\n   * get a unique id\n   * @returns {number} uniqueId\n   */\n\n\n  var _uniqueId = 1;\n\n  function uniqueId() {\n    return _uniqueId++;\n  }\n  /**\n   * get the window object of an element\n   * @param {HTMLElement} element\n   * @returns {DocumentView|Window}\n   */\n\n\n  function getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return doc.defaultView || doc.parentWindow || window;\n  }\n\n  var MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n  var SUPPORT_TOUCH = 'ontouchstart' in window;\n  var SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\n  var SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n  var INPUT_TYPE_TOUCH = 'touch';\n  var INPUT_TYPE_PEN = 'pen';\n  var INPUT_TYPE_MOUSE = 'mouse';\n  var INPUT_TYPE_KINECT = 'kinect';\n  var COMPUTE_INTERVAL = 25;\n  var INPUT_START = 1;\n  var INPUT_MOVE = 2;\n  var INPUT_END = 4;\n  var INPUT_CANCEL = 8;\n  var DIRECTION_NONE = 1;\n  var DIRECTION_LEFT = 2;\n  var DIRECTION_RIGHT = 4;\n  var DIRECTION_UP = 8;\n  var DIRECTION_DOWN = 16;\n  var DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\n  var DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\n  var DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n  var PROPS_XY = ['x', 'y'];\n  var PROPS_CLIENT_XY = ['clientX', 'clientY'];\n  /**\n   * create new input type manager\n   * @param {Manager} manager\n   * @param {Function} callback\n   * @returns {Input}\n   * @constructor\n   */\n\n  function Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget; // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n\n    this.domHandler = function (ev) {\n      if (boolOrFn(manager.options.enable, [manager])) {\n        self.handler(ev);\n      }\n    };\n\n    this.init();\n  }\n\n  Input.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function handler() {},\n\n    /**\n     * bind the events\n     */\n    init: function init() {\n      this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n      this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n      this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function destroy() {\n      this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n      this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n      this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n  };\n  /**\n   * create new input type manager\n   * called by the Manager constructor\n   * @param {Hammer} manager\n   * @returns {Input}\n   */\n\n  function createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n      Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n      Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n      Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n      Type = MouseInput;\n    } else {\n      Type = TouchMouseInput;\n    }\n\n    return new Type(manager, inputHandler);\n  }\n  /**\n   * handle input events\n   * @param {Manager} manager\n   * @param {String} eventType\n   * @param {Object} input\n   */\n\n\n  function inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = eventType & INPUT_START && pointersLen - changedPointersLen === 0;\n    var isFinal = eventType & (INPUT_END | INPUT_CANCEL) && pointersLen - changedPointersLen === 0;\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n      manager.session = {};\n    } // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n\n\n    input.eventType = eventType; // compute scale, rotation etc\n\n    computeInputData(manager, input); // emit secret event\n\n    manager.emit('hammer.input', input);\n    manager.recognize(input);\n    manager.session.prevInput = input;\n  }\n  /**\n   * extend the data with some usable properties like scale, rotate, velocity etc\n   * @param {Object} manager\n   * @param {Object} input\n   */\n\n\n  function computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length; // store the first input to calculate the distance and direction\n\n    if (!session.firstInput) {\n      session.firstInput = simpleCloneInputData(input);\n    } // to compute scale and rotation we need to store the multiple touches\n\n\n    if (pointersLength > 1 && !session.firstMultiple) {\n      session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n      session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = abs(overallVelocity.x) > abs(overallVelocity.y) ? overallVelocity.x : overallVelocity.y;\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n    input.maxPointers = !session.prevInput ? input.pointers.length : input.pointers.length > session.prevInput.maxPointers ? input.pointers.length : session.prevInput.maxPointers;\n    computeIntervalInputData(session, input); // find the correct target\n\n    var target = manager.element;\n\n    if (hasParent(input.srcEvent.target, target)) {\n      target = input.srcEvent.target;\n    }\n\n    input.target = target;\n  }\n\n  function computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n      prevDelta = session.prevDelta = {\n        x: prevInput.deltaX || 0,\n        y: prevInput.deltaY || 0\n      };\n      offset = session.offsetDelta = {\n        x: center.x,\n        y: center.y\n      };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n  }\n  /**\n   * velocity is calculated every x ms\n   * @param {Object} session\n   * @param {Object} input\n   */\n\n\n  function computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity,\n        velocityX,\n        velocityY,\n        direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n      var deltaX = input.deltaX - last.deltaX;\n      var deltaY = input.deltaY - last.deltaY;\n      var v = getVelocity(deltaTime, deltaX, deltaY);\n      velocityX = v.x;\n      velocityY = v.y;\n      velocity = abs(v.x) > abs(v.y) ? v.x : v.y;\n      direction = getDirection(deltaX, deltaY);\n      session.lastInterval = input;\n    } else {\n      // use latest velocity info if it doesn't overtake a minimum period\n      velocity = last.velocity;\n      velocityX = last.velocityX;\n      velocityY = last.velocityY;\n      direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n  }\n  /**\n   * create a simple clone from the input used for storage of firstInput and firstMultiple\n   * @param {Object} input\n   * @returns {Object} clonedInputData\n   */\n\n\n  function simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n\n    while (i < input.pointers.length) {\n      pointers[i] = {\n        clientX: round(input.pointers[i].clientX),\n        clientY: round(input.pointers[i].clientY)\n      };\n      i++;\n    }\n\n    return {\n      timeStamp: now(),\n      pointers: pointers,\n      center: getCenter(pointers),\n      deltaX: input.deltaX,\n      deltaY: input.deltaY\n    };\n  }\n  /**\n   * get the center of all the pointers\n   * @param {Array} pointers\n   * @return {Object} center contains `x` and `y` properties\n   */\n\n\n  function getCenter(pointers) {\n    var pointersLength = pointers.length; // no need to loop when only one touch\n\n    if (pointersLength === 1) {\n      return {\n        x: round(pointers[0].clientX),\n        y: round(pointers[0].clientY)\n      };\n    }\n\n    var x = 0,\n        y = 0,\n        i = 0;\n\n    while (i < pointersLength) {\n      x += pointers[i].clientX;\n      y += pointers[i].clientY;\n      i++;\n    }\n\n    return {\n      x: round(x / pointersLength),\n      y: round(y / pointersLength)\n    };\n  }\n  /**\n   * calculate the velocity between two points. unit is in px per ms.\n   * @param {Number} deltaTime\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Object} velocity `x` and `y`\n   */\n\n\n  function getVelocity(deltaTime, x, y) {\n    return {\n      x: x / deltaTime || 0,\n      y: y / deltaTime || 0\n    };\n  }\n  /**\n   * get the direction between two points\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Number} direction\n   */\n\n\n  function getDirection(x, y) {\n    if (x === y) {\n      return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n      return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n  }\n  /**\n   * calculate the absolute distance between two points\n   * @param {Object} p1 {x, y}\n   * @param {Object} p2 {x, y}\n   * @param {Array} [props] containing x and y keys\n   * @return {Number} distance\n   */\n\n\n  function getDistance(p1, p2, props) {\n    if (!props) {\n      props = PROPS_XY;\n    }\n\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.sqrt(x * x + y * y);\n  }\n  /**\n   * calculate the angle between two coordinates\n   * @param {Object} p1\n   * @param {Object} p2\n   * @param {Array} [props] containing x and y keys\n   * @return {Number} angle\n   */\n\n\n  function getAngle(p1, p2, props) {\n    if (!props) {\n      props = PROPS_XY;\n    }\n\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n  }\n  /**\n   * calculate the rotation degrees between two pointersets\n   * @param {Array} start array of pointers\n   * @param {Array} end array of pointers\n   * @return {Number} rotation\n   */\n\n\n  function getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n  }\n  /**\n   * calculate the scale factor between two pointersets\n   * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n   * @param {Array} start array of pointers\n   * @param {Array} end array of pointers\n   * @return {Number} scale\n   */\n\n\n  function getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n  }\n\n  var MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n  };\n  var MOUSE_ELEMENT_EVENTS = 'mousedown';\n  var MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n  /**\n   * Mouse events input\n   * @constructor\n   * @extends Input\n   */\n\n  function MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n  }\n\n  inherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n      var eventType = MOUSE_INPUT_MAP[ev.type]; // on start we want to have the left mouse button down\n\n      if (eventType & INPUT_START && ev.button === 0) {\n        this.pressed = true;\n      }\n\n      if (eventType & INPUT_MOVE && ev.which !== 1) {\n        eventType = INPUT_END;\n      } // mouse must be down\n\n\n      if (!this.pressed) {\n        return;\n      }\n\n      if (eventType & INPUT_END) {\n        this.pressed = false;\n      }\n\n      this.callback(this.manager, eventType, {\n        pointers: [ev],\n        changedPointers: [ev],\n        pointerType: INPUT_TYPE_MOUSE,\n        srcEvent: ev\n      });\n    }\n  });\n  var POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n  }; // in IE10 the pointer types is defined as an enum\n\n  var IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n\n  };\n  var POINTER_ELEMENT_EVENTS = 'pointerdown';\n  var POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel'; // IE10 has prefixed support, and case-sensitive\n\n  if (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n  }\n  /**\n   * Pointer events input\n   * @constructor\n   * @extends Input\n   */\n\n\n  function PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n    Input.apply(this, arguments);\n    this.store = this.manager.session.pointerEvents = [];\n  }\n\n  inherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n      var store = this.store;\n      var removePointer = false;\n      var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n      var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n      var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n      var isTouch = pointerType == INPUT_TYPE_TOUCH; // get index of the event in the store\n\n      var storeIndex = inArray(store, ev.pointerId, 'pointerId'); // start and mouse must be down\n\n      if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n        if (storeIndex < 0) {\n          store.push(ev);\n          storeIndex = store.length - 1;\n        }\n      } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        removePointer = true;\n      } // it not found, so the pointer hasn't been down (so it's probably a hover)\n\n\n      if (storeIndex < 0) {\n        return;\n      } // update the event in the store\n\n\n      store[storeIndex] = ev;\n      this.callback(this.manager, eventType, {\n        pointers: store,\n        changedPointers: [ev],\n        pointerType: pointerType,\n        srcEvent: ev\n      });\n\n      if (removePointer) {\n        // remove from the store\n        store.splice(storeIndex, 1);\n      }\n    }\n  });\n  var SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n  };\n  var SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\n  var SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n  /**\n   * Touch events input\n   * @constructor\n   * @extends Input\n   */\n\n  function SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n    Input.apply(this, arguments);\n  }\n\n  inherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n      var type = SINGLE_TOUCH_INPUT_MAP[ev.type]; // should we handle the touch events?\n\n      if (type === INPUT_START) {\n        this.started = true;\n      }\n\n      if (!this.started) {\n        return;\n      }\n\n      var touches = normalizeSingleTouches.call(this, ev, type); // when done, reset the started state\n\n      if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n        this.started = false;\n      }\n\n      this.callback(this.manager, type, {\n        pointers: touches[0],\n        changedPointers: touches[1],\n        pointerType: INPUT_TYPE_TOUCH,\n        srcEvent: ev\n      });\n    }\n  });\n  /**\n   * @this {TouchInput}\n   * @param {Object} ev\n   * @param {Number} type flag\n   * @returns {undefined|Array} [all, changed]\n   */\n\n  function normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n      all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n  }\n\n  var TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n  };\n  var TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n  /**\n   * Multi-user touch events input\n   * @constructor\n   * @extends Input\n   */\n\n  function TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n    Input.apply(this, arguments);\n  }\n\n  inherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n      var type = TOUCH_INPUT_MAP[ev.type];\n      var touches = getTouches.call(this, ev, type);\n\n      if (!touches) {\n        return;\n      }\n\n      this.callback(this.manager, type, {\n        pointers: touches[0],\n        changedPointers: touches[1],\n        pointerType: INPUT_TYPE_TOUCH,\n        srcEvent: ev\n      });\n    }\n  });\n  /**\n   * @this {TouchInput}\n   * @param {Object} ev\n   * @param {Number} type flag\n   * @returns {undefined|Array} [all, changed]\n   */\n\n  function getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds; // when there is only one touch, the process can be simplified\n\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n      targetIds[allTouches[0].identifier] = true;\n      return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target; // get target touches from touches\n\n    targetTouches = allTouches.filter(function (touch) {\n      return hasParent(touch.target, target);\n    }); // collect touches\n\n    if (type === INPUT_START) {\n      i = 0;\n\n      while (i < targetTouches.length) {\n        targetIds[targetTouches[i].identifier] = true;\n        i++;\n      }\n    } // filter changed touches to only contain touches that exist in the collected target ids\n\n\n    i = 0;\n\n    while (i < changedTouches.length) {\n      if (targetIds[changedTouches[i].identifier]) {\n        changedTargetTouches.push(changedTouches[i]);\n      } // cleanup removed touches\n\n\n      if (type & (INPUT_END | INPUT_CANCEL)) {\n        delete targetIds[changedTouches[i].identifier];\n      }\n\n      i++;\n    }\n\n    if (!changedTargetTouches.length) {\n      return;\n    }\n\n    return [// merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n    uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true), changedTargetTouches];\n  }\n  /**\n   * Combined touch and mouse input\n   *\n   * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n   * This because touch devices also emit mouse events while doing a touch.\n   *\n   * @constructor\n   * @extends Input\n   */\n\n\n  var DEDUP_TIMEOUT = 2500;\n  var DEDUP_DISTANCE = 25;\n\n  function TouchMouseInput() {\n    Input.apply(this, arguments);\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n    this.primaryTouch = null;\n    this.lastTouches = [];\n  }\n\n  inherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n      var isTouch = inputData.pointerType == INPUT_TYPE_TOUCH,\n          isMouse = inputData.pointerType == INPUT_TYPE_MOUSE;\n\n      if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n        return;\n      } // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n\n\n      if (isTouch) {\n        recordTouches.call(this, inputEvent, inputData);\n      } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n        return;\n      }\n\n      this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n      this.touch.destroy();\n      this.mouse.destroy();\n    }\n  });\n\n  function recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n      this.primaryTouch = eventData.changedPointers[0].identifier;\n      setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n      setLastTouch.call(this, eventData);\n    }\n  }\n\n  function setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n      var lastTouch = {\n        x: touch.clientX,\n        y: touch.clientY\n      };\n      this.lastTouches.push(lastTouch);\n      var lts = this.lastTouches;\n\n      var removeLastTouch = function removeLastTouch() {\n        var i = lts.indexOf(lastTouch);\n\n        if (i > -1) {\n          lts.splice(i, 1);\n        }\n      };\n\n      setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n  }\n\n  function isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX,\n        y = eventData.srcEvent.clientY;\n\n    for (var i = 0; i < this.lastTouches.length; i++) {\n      var t = this.lastTouches[i];\n      var dx = Math.abs(x - t.x),\n          dy = Math.abs(y - t.y);\n\n      if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  var PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\n  var NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined; // magical touchAction value\n\n  var TOUCH_ACTION_COMPUTE = 'compute';\n  var TOUCH_ACTION_AUTO = 'auto';\n  var TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\n\n  var TOUCH_ACTION_NONE = 'none';\n  var TOUCH_ACTION_PAN_X = 'pan-x';\n  var TOUCH_ACTION_PAN_Y = 'pan-y';\n  var TOUCH_ACTION_MAP = getTouchActionProps();\n  /**\n   * Touch Action\n   * sets the touchAction property or uses the js alternative\n   * @param {Manager} manager\n   * @param {String} value\n   * @constructor\n   */\n\n  function TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n  }\n\n  TouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function set(value) {\n      // find out the touch-action by the event handlers\n      if (value == TOUCH_ACTION_COMPUTE) {\n        value = this.compute();\n      }\n\n      if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n        this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n      }\n\n      this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function update() {\n      this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function compute() {\n      var actions = [];\n      each(this.manager.recognizers, function (recognizer) {\n        if (boolOrFn(recognizer.options.enable, [recognizer])) {\n          actions = actions.concat(recognizer.getTouchAction());\n        }\n      });\n      return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function preventDefaults(input) {\n      var srcEvent = input.srcEvent;\n      var direction = input.offsetDirection; // if the touch action did prevented once this session\n\n      if (this.manager.session.prevented) {\n        srcEvent.preventDefault();\n        return;\n      }\n\n      var actions = this.actions;\n      var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n      var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n      var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n      if (hasNone) {\n        //do not prevent defaults if this is a tap gesture\n        var isTapPointer = input.pointers.length === 1;\n        var isTapMovement = input.distance < 2;\n        var isTapTouchTime = input.deltaTime < 250;\n\n        if (isTapPointer && isTapMovement && isTapTouchTime) {\n          return;\n        }\n      }\n\n      if (hasPanX && hasPanY) {\n        // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n        return;\n      }\n\n      if (hasNone || hasPanY && direction & DIRECTION_HORIZONTAL || hasPanX && direction & DIRECTION_VERTICAL) {\n        return this.preventSrc(srcEvent);\n      }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function preventSrc(srcEvent) {\n      this.manager.session.prevented = true;\n      srcEvent.preventDefault();\n    }\n  };\n  /**\n   * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n   * @param {String} actions\n   * @returns {*}\n   */\n\n  function cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n      return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y); // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n\n    if (hasPanX && hasPanY) {\n      return TOUCH_ACTION_NONE;\n    } // pan-x OR pan-y\n\n\n    if (hasPanX || hasPanY) {\n      return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    } // manipulation\n\n\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n      return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n  }\n\n  function getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n      return false;\n    }\n\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function (val) {\n      // If css.supports is not supported but there is native touch-action assume it supports\n      // all values. This is the case for IE 10 and 11.\n      touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n  }\n  /**\n   * Recognizer flow explained; *\n   * All recognizers have the initial state of POSSIBLE when a input session starts.\n   * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n   * Example session for mouse-input: mousedown -> mousemove -> mouseup\n   *\n   * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n   * which determines with state it should be.\n   *\n   * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n   * POSSIBLE to give it another change on the next cycle.\n   *\n   *               Possible\n   *                  |\n   *            +-----+---------------+\n   *            |                     |\n   *      +-----+-----+               |\n   *      |           |               |\n   *   Failed      Cancelled          |\n   *                          +-------+------+\n   *                          |              |\n   *                      Recognized       Began\n   *                                         |\n   *                                      Changed\n   *                                         |\n   *                                  Ended/Recognized\n   */\n\n\n  var STATE_POSSIBLE = 1;\n  var STATE_BEGAN = 2;\n  var STATE_CHANGED = 4;\n  var STATE_ENDED = 8;\n  var STATE_RECOGNIZED = STATE_ENDED;\n  var STATE_CANCELLED = 16;\n  var STATE_FAILED = 32;\n  /**\n   * Recognizer\n   * Every recognizer needs to extend from this class.\n   * @constructor\n   * @param {Object} options\n   */\n\n  function Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n    this.id = uniqueId();\n    this.manager = null; // default is enable true\n\n    this.options.enable = ifUndefined(this.options.enable, true);\n    this.state = STATE_POSSIBLE;\n    this.simultaneous = {};\n    this.requireFail = [];\n  }\n\n  Recognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function set(options) {\n      assign(this.options, options); // also update the touchAction, in case something changed about the directions/enabled state\n\n      this.manager && this.manager.touchAction.update();\n      return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function recognizeWith(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n        return this;\n      }\n\n      var simultaneous = this.simultaneous;\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\n      if (!simultaneous[otherRecognizer.id]) {\n        simultaneous[otherRecognizer.id] = otherRecognizer;\n        otherRecognizer.recognizeWith(this);\n      }\n\n      return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function dropRecognizeWith(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n        return this;\n      }\n\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n      delete this.simultaneous[otherRecognizer.id];\n      return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function requireFailure(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n        return this;\n      }\n\n      var requireFail = this.requireFail;\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\n      if (inArray(requireFail, otherRecognizer) === -1) {\n        requireFail.push(otherRecognizer);\n        otherRecognizer.requireFailure(this);\n      }\n\n      return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function dropRequireFailure(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n        return this;\n      }\n\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n      var index = inArray(this.requireFail, otherRecognizer);\n\n      if (index > -1) {\n        this.requireFail.splice(index, 1);\n      }\n\n      return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function hasRequireFailures() {\n      return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function canRecognizeWith(otherRecognizer) {\n      return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function emit(input) {\n      var self = this;\n      var state = this.state;\n\n      function emit(event) {\n        self.manager.emit(event, input);\n      } // 'panstart' and 'panmove'\n\n\n      if (state < STATE_ENDED) {\n        emit(self.options.event + stateStr(state));\n      }\n\n      emit(self.options.event); // simple 'eventName' events\n\n      if (input.additionalEvent) {\n        // additional event(panleft, panright, pinchin, pinchout...)\n        emit(input.additionalEvent);\n      } // panend and pancancel\n\n\n      if (state >= STATE_ENDED) {\n        emit(self.options.event + stateStr(state));\n      }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function tryEmit(input) {\n      if (this.canEmit()) {\n        return this.emit(input);\n      } // it's failing anyway\n\n\n      this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function canEmit() {\n      var i = 0;\n\n      while (i < this.requireFail.length) {\n        if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n          return false;\n        }\n\n        i++;\n      }\n\n      return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function recognize(inputData) {\n      // make a new copy of the inputData\n      // so we can change the inputData without messing up the other recognizers\n      var inputDataClone = assign({}, inputData); // is is enabled and allow recognizing?\n\n      if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n        this.reset();\n        this.state = STATE_FAILED;\n        return;\n      } // reset when we've reached the end\n\n\n      if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n        this.state = STATE_POSSIBLE;\n      }\n\n      this.state = this.process(inputDataClone); // the recognizer has recognized a gesture\n      // so trigger an event\n\n      if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n        this.tryEmit(inputDataClone);\n      }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function process(inputData) {},\n    // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function getTouchAction() {},\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function reset() {}\n  };\n  /**\n   * get a usable string, used as event postfix\n   * @param {Const} state\n   * @returns {String} state\n   */\n\n  function stateStr(state) {\n    if (state & STATE_CANCELLED) {\n      return 'cancel';\n    } else if (state & STATE_ENDED) {\n      return 'end';\n    } else if (state & STATE_CHANGED) {\n      return 'move';\n    } else if (state & STATE_BEGAN) {\n      return 'start';\n    }\n\n    return '';\n  }\n  /**\n   * direction cons to string\n   * @param {Const} direction\n   * @returns {String}\n   */\n\n\n  function directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n      return 'down';\n    } else if (direction == DIRECTION_UP) {\n      return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n      return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n      return 'right';\n    }\n\n    return '';\n  }\n  /**\n   * get a recognizer by name if it is bound to a manager\n   * @param {Recognizer|String} otherRecognizer\n   * @param {Recognizer} recognizer\n   * @returns {Recognizer}\n   */\n\n\n  function getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n\n    if (manager) {\n      return manager.get(otherRecognizer);\n    }\n\n    return otherRecognizer;\n  }\n  /**\n   * This recognizer is just used as a base for the simple attribute recognizers.\n   * @constructor\n   * @extends Recognizer\n   */\n\n\n  function AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n  }\n\n  inherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n      /**\n       * @type {Number}\n       * @default 1\n       */\n      pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function attrTest(input) {\n      var optionPointers = this.options.pointers;\n      return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function process(input) {\n      var state = this.state;\n      var eventType = input.eventType;\n      var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n      var isValid = this.attrTest(input); // on cancel input and we've recognized before, return STATE_CANCELLED\n\n      if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n        return state | STATE_CANCELLED;\n      } else if (isRecognized || isValid) {\n        if (eventType & INPUT_END) {\n          return state | STATE_ENDED;\n        } else if (!(state & STATE_BEGAN)) {\n          return STATE_BEGAN;\n        }\n\n        return state | STATE_CHANGED;\n      }\n\n      return STATE_FAILED;\n    }\n  });\n  /**\n   * Pan\n   * Recognized when the pointer is down and moved in the allowed direction.\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n    this.pX = null;\n    this.pY = null;\n  }\n\n  inherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n      event: 'pan',\n      threshold: 10,\n      pointers: 1,\n      direction: DIRECTION_ALL\n    },\n    getTouchAction: function getTouchAction() {\n      var direction = this.options.direction;\n      var actions = [];\n\n      if (direction & DIRECTION_HORIZONTAL) {\n        actions.push(TOUCH_ACTION_PAN_Y);\n      }\n\n      if (direction & DIRECTION_VERTICAL) {\n        actions.push(TOUCH_ACTION_PAN_X);\n      }\n\n      return actions;\n    },\n    directionTest: function directionTest(input) {\n      var options = this.options;\n      var hasMoved = true;\n      var distance = input.distance;\n      var direction = input.direction;\n      var x = input.deltaX;\n      var y = input.deltaY; // lock to axis?\n\n      if (!(direction & options.direction)) {\n        if (options.direction & DIRECTION_HORIZONTAL) {\n          direction = x === 0 ? DIRECTION_NONE : x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n          hasMoved = x != this.pX;\n          distance = Math.abs(input.deltaX);\n        } else {\n          direction = y === 0 ? DIRECTION_NONE : y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n          hasMoved = y != this.pY;\n          distance = Math.abs(input.deltaY);\n        }\n      }\n\n      input.direction = direction;\n      return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n    attrTest: function attrTest(input) {\n      return AttrRecognizer.prototype.attrTest.call(this, input) && (this.state & STATE_BEGAN || !(this.state & STATE_BEGAN) && this.directionTest(input));\n    },\n    emit: function emit(input) {\n      this.pX = input.deltaX;\n      this.pY = input.deltaY;\n      var direction = directionStr(input.direction);\n\n      if (direction) {\n        input.additionalEvent = this.options.event + direction;\n      }\n\n      this._super.emit.call(this, input);\n    }\n  });\n  /**\n   * Pinch\n   * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n  }\n\n  inherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n      event: 'pinch',\n      threshold: 0,\n      pointers: 2\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_NONE];\n    },\n    attrTest: function attrTest(input) {\n      return this._super.attrTest.call(this, input) && (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n    emit: function emit(input) {\n      if (input.scale !== 1) {\n        var inOut = input.scale < 1 ? 'in' : 'out';\n        input.additionalEvent = this.options.event + inOut;\n      }\n\n      this._super.emit.call(this, input);\n    }\n  });\n  /**\n   * Press\n   * Recognized when the pointer is down for x ms without any movement.\n   * @constructor\n   * @extends Recognizer\n   */\n\n  function PressRecognizer() {\n    Recognizer.apply(this, arguments);\n    this._timer = null;\n    this._input = null;\n  }\n\n  inherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n      event: 'press',\n      pointers: 1,\n      time: 251,\n      // minimal time of the pointer to be pressed\n      threshold: 9 // a minimal movement is ok, but keep it low\n\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_AUTO];\n    },\n    process: function process(input) {\n      var options = this.options;\n      var validPointers = input.pointers.length === options.pointers;\n      var validMovement = input.distance < options.threshold;\n      var validTime = input.deltaTime > options.time;\n      this._input = input; // we only allow little movement\n      // and we've reached an end event, so a tap is possible\n\n      if (!validMovement || !validPointers || input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime) {\n        this.reset();\n      } else if (input.eventType & INPUT_START) {\n        this.reset();\n        this._timer = setTimeoutContext(function () {\n          this.state = STATE_RECOGNIZED;\n          this.tryEmit();\n        }, options.time, this);\n      } else if (input.eventType & INPUT_END) {\n        return STATE_RECOGNIZED;\n      }\n\n      return STATE_FAILED;\n    },\n    reset: function reset() {\n      clearTimeout(this._timer);\n    },\n    emit: function emit(input) {\n      if (this.state !== STATE_RECOGNIZED) {\n        return;\n      }\n\n      if (input && input.eventType & INPUT_END) {\n        this.manager.emit(this.options.event + 'up', input);\n      } else {\n        this._input.timeStamp = now();\n        this.manager.emit(this.options.event, this._input);\n      }\n    }\n  });\n  /**\n   * Rotate\n   * Recognized when two or more pointer are moving in a circular motion.\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n  }\n\n  inherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n      event: 'rotate',\n      threshold: 0,\n      pointers: 2\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_NONE];\n    },\n    attrTest: function attrTest(input) {\n      return this._super.attrTest.call(this, input) && (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n  });\n  /**\n   * Swipe\n   * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n  }\n\n  inherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n      event: 'swipe',\n      threshold: 10,\n      velocity: 0.3,\n      direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n      pointers: 1\n    },\n    getTouchAction: function getTouchAction() {\n      return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n    attrTest: function attrTest(input) {\n      var direction = this.options.direction;\n      var velocity;\n\n      if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n        velocity = input.overallVelocity;\n      } else if (direction & DIRECTION_HORIZONTAL) {\n        velocity = input.overallVelocityX;\n      } else if (direction & DIRECTION_VERTICAL) {\n        velocity = input.overallVelocityY;\n      }\n\n      return this._super.attrTest.call(this, input) && direction & input.offsetDirection && input.distance > this.options.threshold && input.maxPointers == this.options.pointers && abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n    emit: function emit(input) {\n      var direction = directionStr(input.offsetDirection);\n\n      if (direction) {\n        this.manager.emit(this.options.event + direction, input);\n      }\n\n      this.manager.emit(this.options.event, input);\n    }\n  });\n  /**\n   * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n   * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n   * a single tap.\n   *\n   * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n   * multi-taps being recognized.\n   * @constructor\n   * @extends Recognizer\n   */\n\n  function TapRecognizer() {\n    Recognizer.apply(this, arguments); // previous time and center,\n    // used for tap counting\n\n    this.pTime = false;\n    this.pCenter = false;\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n  }\n\n  inherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n      event: 'tap',\n      pointers: 1,\n      taps: 1,\n      interval: 300,\n      // max time between the multi-tap taps\n      time: 250,\n      // max time of the pointer to be down (like finger on the screen)\n      threshold: 9,\n      // a minimal movement is ok, but keep it low\n      posThreshold: 10 // a multi-tap can be a bit off the initial position\n\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_MANIPULATION];\n    },\n    process: function process(input) {\n      var options = this.options;\n      var validPointers = input.pointers.length === options.pointers;\n      var validMovement = input.distance < options.threshold;\n      var validTouchTime = input.deltaTime < options.time;\n      this.reset();\n\n      if (input.eventType & INPUT_START && this.count === 0) {\n        return this.failTimeout();\n      } // we only allow little movement\n      // and we've reached an end event, so a tap is possible\n\n\n      if (validMovement && validTouchTime && validPointers) {\n        if (input.eventType != INPUT_END) {\n          return this.failTimeout();\n        }\n\n        var validInterval = this.pTime ? input.timeStamp - this.pTime < options.interval : true;\n        var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n        this.pTime = input.timeStamp;\n        this.pCenter = input.center;\n\n        if (!validMultiTap || !validInterval) {\n          this.count = 1;\n        } else {\n          this.count += 1;\n        }\n\n        this._input = input; // if tap count matches we have recognized it,\n        // else it has began recognizing...\n\n        var tapCount = this.count % options.taps;\n\n        if (tapCount === 0) {\n          // no failing requirements, immediately trigger the tap event\n          // or wait as long as the multitap interval to trigger\n          if (!this.hasRequireFailures()) {\n            return STATE_RECOGNIZED;\n          } else {\n            this._timer = setTimeoutContext(function () {\n              this.state = STATE_RECOGNIZED;\n              this.tryEmit();\n            }, options.interval, this);\n            return STATE_BEGAN;\n          }\n        }\n      }\n\n      return STATE_FAILED;\n    },\n    failTimeout: function failTimeout() {\n      this._timer = setTimeoutContext(function () {\n        this.state = STATE_FAILED;\n      }, this.options.interval, this);\n      return STATE_FAILED;\n    },\n    reset: function reset() {\n      clearTimeout(this._timer);\n    },\n    emit: function emit() {\n      if (this.state == STATE_RECOGNIZED) {\n        this._input.tapCount = this.count;\n        this.manager.emit(this.options.event, this._input);\n      }\n    }\n  });\n  /**\n   * Simple way to create a manager with a default set of recognizers.\n   * @param {HTMLElement} element\n   * @param {Object} [options]\n   * @constructor\n   */\n\n  function Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n  }\n  /**\n   * @const {string}\n   */\n\n\n  Hammer.VERSION = '2.0.7';\n  /**\n   * default settings\n   * @namespace\n   */\n\n  Hammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [// RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n    [RotateRecognizer, {\n      enable: false\n    }], [PinchRecognizer, {\n      enable: false\n    }, ['rotate']], [SwipeRecognizer, {\n      direction: DIRECTION_HORIZONTAL\n    }], [PanRecognizer, {\n      direction: DIRECTION_HORIZONTAL\n    }, ['swipe']], [TapRecognizer], [TapRecognizer, {\n      event: 'doubletap',\n      taps: 2\n    }, ['tap']], [PressRecognizer]],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n      /**\n       * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n       * @type {String}\n       * @default 'none'\n       */\n      userSelect: 'none',\n\n      /**\n       * Disable the Windows Phone grippers when pressing an element.\n       * @type {String}\n       * @default 'none'\n       */\n      touchSelect: 'none',\n\n      /**\n       * Disables the default callout shown when you touch and hold a touch target.\n       * On iOS, when you touch and hold a touch target such as a link, Safari displays\n       * a callout containing information about the link. This property allows you to disable that callout.\n       * @type {String}\n       * @default 'none'\n       */\n      touchCallout: 'none',\n\n      /**\n       * Specifies whether zooming is enabled. Used by IE10>\n       * @type {String}\n       * @default 'none'\n       */\n      contentZooming: 'none',\n\n      /**\n       * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n       * @type {String}\n       * @default 'none'\n       */\n      userDrag: 'none',\n\n      /**\n       * Overrides the highlight color shown when the user taps a link or a JavaScript\n       * clickable element in iOS. This property obeys the alpha value, if specified.\n       * @type {String}\n       * @default 'rgba(0,0,0,0)'\n       */\n      tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n  };\n  var STOP = 1;\n  var FORCED_STOP = 2;\n  /**\n   * Manager\n   * @param {HTMLElement} element\n   * @param {Object} [options]\n   * @constructor\n   */\n\n  function Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n    this.options.inputTarget = this.options.inputTarget || element;\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n    toggleCssProps(this, true);\n    each(this.options.recognizers, function (item) {\n      var recognizer = this.add(new item[0](item[1]));\n      item[2] && recognizer.recognizeWith(item[2]);\n      item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n  }\n\n  Manager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function set(options) {\n      assign(this.options, options); // Options that need a little more setup\n\n      if (options.touchAction) {\n        this.touchAction.update();\n      }\n\n      if (options.inputTarget) {\n        // Clean up existing event listeners and reinitialize\n        this.input.destroy();\n        this.input.target = options.inputTarget;\n        this.input.init();\n      }\n\n      return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function stop(force) {\n      this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function recognize(inputData) {\n      var session = this.session;\n\n      if (session.stopped) {\n        return;\n      } // run the touch-action polyfill\n\n\n      this.touchAction.preventDefaults(inputData);\n      var recognizer;\n      var recognizers = this.recognizers; // this holds the recognizer that is being recognized.\n      // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n      // if no recognizer is detecting a thing, it is set to `null`\n\n      var curRecognizer = session.curRecognizer; // reset when the last recognizer is recognized\n      // or when we're in a new session\n\n      if (!curRecognizer || curRecognizer && curRecognizer.state & STATE_RECOGNIZED) {\n        curRecognizer = session.curRecognizer = null;\n      }\n\n      var i = 0;\n\n      while (i < recognizers.length) {\n        recognizer = recognizers[i]; // find out if we are allowed try to recognize the input for this one.\n        // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n        // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n        //      that is being recognized.\n        // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n        //      this can be setup with the `recognizeWith()` method on the recognizer.\n\n        if (session.stopped !== FORCED_STOP && ( // 1\n        !curRecognizer || recognizer == curRecognizer || // 2\n        recognizer.canRecognizeWith(curRecognizer))) {\n          // 3\n          recognizer.recognize(inputData);\n        } else {\n          recognizer.reset();\n        } // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n        // current active recognizer. but only if we don't already have an active recognizer\n\n\n        if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n          curRecognizer = session.curRecognizer = recognizer;\n        }\n\n        i++;\n      }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function get(recognizer) {\n      if (recognizer instanceof Recognizer) {\n        return recognizer;\n      }\n\n      var recognizers = this.recognizers;\n\n      for (var i = 0; i < recognizers.length; i++) {\n        if (recognizers[i].options.event == recognizer) {\n          return recognizers[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function add(recognizer) {\n      if (invokeArrayArg(recognizer, 'add', this)) {\n        return this;\n      } // remove existing\n\n\n      var existing = this.get(recognizer.options.event);\n\n      if (existing) {\n        this.remove(existing);\n      }\n\n      this.recognizers.push(recognizer);\n      recognizer.manager = this;\n      this.touchAction.update();\n      return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function remove(recognizer) {\n      if (invokeArrayArg(recognizer, 'remove', this)) {\n        return this;\n      }\n\n      recognizer = this.get(recognizer); // let's make sure this recognizer exists\n\n      if (recognizer) {\n        var recognizers = this.recognizers;\n        var index = inArray(recognizers, recognizer);\n\n        if (index !== -1) {\n          recognizers.splice(index, 1);\n          this.touchAction.update();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function on(events, handler) {\n      if (events === undefined) {\n        return;\n      }\n\n      if (handler === undefined) {\n        return;\n      }\n\n      var handlers = this.handlers;\n      each(splitStr(events), function (event) {\n        handlers[event] = handlers[event] || [];\n        handlers[event].push(handler);\n      });\n      return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function off(events, handler) {\n      if (events === undefined) {\n        return;\n      }\n\n      var handlers = this.handlers;\n      each(splitStr(events), function (event) {\n        if (!handler) {\n          delete handlers[event];\n        } else {\n          handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n        }\n      });\n      return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function emit(event, data) {\n      // we also want to trigger dom events\n      if (this.options.domEvents) {\n        triggerDomEvent(event, data);\n      } // no handlers, so skip it all\n\n\n      var handlers = this.handlers[event] && this.handlers[event].slice();\n\n      if (!handlers || !handlers.length) {\n        return;\n      }\n\n      data.type = event;\n\n      data.preventDefault = function () {\n        data.srcEvent.preventDefault();\n      };\n\n      var i = 0;\n\n      while (i < handlers.length) {\n        handlers[i](data);\n        i++;\n      }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function destroy() {\n      this.element && toggleCssProps(this, false);\n      this.handlers = {};\n      this.session = {};\n      this.input.destroy();\n      this.element = null;\n    }\n  };\n  /**\n   * add/remove the css properties as defined in manager.options.cssProps\n   * @param {Manager} manager\n   * @param {Boolean} add\n   */\n\n  function toggleCssProps(manager, add) {\n    var element = manager.element;\n\n    if (!element.style) {\n      return;\n    }\n\n    var prop;\n    each(manager.options.cssProps, function (value, name) {\n      prop = prefixed(element.style, name);\n\n      if (add) {\n        manager.oldCssProps[prop] = element.style[prop];\n        element.style[prop] = value;\n      } else {\n        element.style[prop] = manager.oldCssProps[prop] || '';\n      }\n    });\n\n    if (!add) {\n      manager.oldCssProps = {};\n    }\n  }\n  /**\n   * trigger dom event\n   * @param {String} event\n   * @param {Object} data\n   */\n\n\n  function triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n  }\n\n  assign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n  }); // this prevents errors when Hammer is loaded in the presence of an AMD\n  //  style loader but by script tag, not by the loader.\n\n  var freeGlobal = typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}; // jshint ignore:line\n\n  freeGlobal.Hammer = Hammer;\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return Hammer;\n    });\n  } else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n  } else {\n    window[exportName] = Hammer;\n  }\n})(window, document, 'Hammer');","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '../../utils';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","/**\n * This file contains overrides the default\n * hammer.js functions to add our own utility\n */\n\n/* Hammer.js constants */\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n/**\n * Helper function that returns true if any element in an array meets given criteria.\n * Because older browsers do not support `Array.prototype.some`\n * @params array {Array}\n * @params predict {Function}\n */\n\nfunction some(array, predict) {\n  for (var i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/* eslint-disable no-invalid-this */\n\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  var oldHandler = PointerEventInput.prototype.handler; // overrides PointerEventInput.handler to accept right mouse button\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    var store = this.store; // Allow non-left mouse buttons through\n\n    if (ev.button > 0) {\n      if (!some(store, function (e) {\n        return e.pointerId === ev.pointerId;\n      })) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n} // overrides MouseInput.handler to accept right mouse button\n\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    var eventType = MOUSE_INPUT_MAP[ev.type]; // on start we want to have the mouse button down\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    } // mouse must be down\n\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nvar hammerjs = null;\n\nif (typeof document !== 'undefined') {\n  // Avoid crash if imported in a web worker\n  hammerjs = require('hammerjs');\n  enhancePointerEventInput(hammerjs.PointerEventInput);\n  enhanceMouseInput(hammerjs.MouseInput);\n}\n\nexport default hammerjs;","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport Hammer from './utils/hammer'; // This module contains constants that must be conditionally required\n// due to `window`/`document` references downstream.\n\nexport var RECOGNIZERS = Hammer ? [[Hammer.Rotate, {\n  enable: false\n}], [Hammer.Pinch, {\n  enable: false\n}], [Hammer.Swipe, {\n  enable: false\n}], [Hammer.Pan, {\n  threshold: 0,\n  enable: false\n}], [Hammer.Press, {\n  enable: false\n}], [Hammer.Tap, {\n  event: 'doubletap',\n  taps: 2,\n  enable: false\n}], // TODO - rename to 'tap' and 'singletap' in the next major release\n[Hammer.Tap, {\n  event: 'anytap',\n  enable: false\n}], [Hammer.Tap, {\n  enable: false\n}]] : null; // Recognize the following gestures even if a given recognizer succeeds\n\nexport var RECOGNIZER_COMPATIBLE_MAP = {\n  rotate: ['pinch'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n}; // Recognize the folling gestures only if a given recognizer fails\n\nexport var RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\n/**\n * Only one set of basic input events will be fired by Hammer.js:\n * either pointer, touch, or mouse, depending on system support.\n * In order to enable an application to be agnostic of system support,\n * alias basic input events into \"classes\" of events: down, move, and up.\n * See `_onBasicInput()` for usage of these aliases.\n */\n\nexport var BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\nexport var INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: [// Chrome, Safari\n  'wheel', // IE\n  'mousewheel', // legacy Firefox\n  'DOMMouseScroll']\n};\n/**\n * \"Gestural\" events are those that have semantic meaning beyond the basic input event,\n * e.g. a click or tap is a sequence of `down` and `up` events with no `move` event in between.\n * Hammer.js handles these with its Recognizer system;\n * this block maps event names to the Recognizers required to detect the events.\n */\n\nexport var EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\n/**\n * Map gestural events typically provided by browsers\n * that are not reported in 'hammer.input' events\n * to corresponding Hammer.js gestures.\n */\n\nexport var GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nvar firefox = userAgent.indexOf('firefox') !== -1;\nvar WHEEL_EVENTS = INPUT_EVENT_TYPES.WHEEL_EVENTS;\nvar EVENT_TYPE = 'wheel'; // Constants for normalizing input delta\n\nvar WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nvar WHEEL_DELTA_PER_LINE = 40; // Slow down zoom if shift key is held for more precise zooming\n\nvar SHIFT_MULTIPLIER = 0.25;\n\nvar WheelInput =\n/*#__PURE__*/\nfunction () {\n  function WheelInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, WheelInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent, passiveSupported ? {\n        passive: false\n      } : false);\n    });\n  }\n\n  _createClass(WheelInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n    /* eslint-disable complexity, max-statements */\n\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      var value = event.deltaY;\n\n      if (window.WheelEvent) {\n        // Firefox doubles the values on retina screens...\n        if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n          value /= window.devicePixelRatio;\n        }\n\n        if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n          value *= WHEEL_DELTA_PER_LINE;\n        }\n      }\n\n      var wheelPosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n\n      if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n        // This one is definitely a mouse wheel event.\n        // Normalize this value to match trackpad.\n        value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n      }\n\n      if (event.shiftKey && value) {\n        value = value * SHIFT_MULTIPLIER;\n      }\n\n      this._onWheel(event, -value, wheelPosition);\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(srcEvent, delta, position) {\n      this.callback({\n        type: EVENT_TYPE,\n        center: position,\n        delta: delta,\n        srcEvent: srcEvent,\n        pointerType: 'mouse',\n        target: srcEvent.target\n      });\n    }\n  }]);\n\n  return WheelInput;\n}();\n\nexport { WheelInput as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar MOUSE_EVENTS = INPUT_EVENT_TYPES.MOUSE_EVENTS;\nvar MOVE_EVENT_TYPE = 'pointermove';\nvar OVER_EVENT_TYPE = 'pointerover';\nvar OUT_EVENT_TYPE = 'pointerout';\nvar LEAVE_EVENT_TYPE = 'pointerleave';\n/**\n * Hammer.js swallows 'move' events (for pointer/touch/mouse)\n * when the pointer is not down. This class sets up a handler\n * specifically for these events to work around this limitation.\n * Note that this could be extended to more intelligently handle\n * move events across input types, e.g. storing multiple simultaneous\n * pointer/touch events, calculating speed/direction, etc.\n */\n\nvar MoveInput =\n/*#__PURE__*/\nfunction () {\n  function MoveInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, MoveInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(MoveInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === MOVE_EVENT_TYPE) {\n        this.enableMoveEvent = enabled;\n      }\n\n      if (eventType === OVER_EVENT_TYPE) {\n        this.enableOverEvent = enabled;\n      }\n\n      if (eventType === OUT_EVENT_TYPE) {\n        this.enableOutEvent = enabled;\n      }\n\n      if (eventType === LEAVE_EVENT_TYPE) {\n        this.enableLeaveEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      this.handleOverEvent(event);\n      this.handleOutEvent(event);\n      this.handleLeaveEvent(event);\n      this.handleMoveEvent(event);\n    }\n  }, {\n    key: \"handleOverEvent\",\n    value: function handleOverEvent(event) {\n      if (this.enableOverEvent) {\n        if (event.type === 'mouseover') {\n          this.callback({\n            type: OVER_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleOutEvent\",\n    value: function handleOutEvent(event) {\n      if (this.enableOutEvent) {\n        if (event.type === 'mouseout') {\n          this.callback({\n            type: OUT_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleLeaveEvent\",\n    value: function handleLeaveEvent(event) {\n      if (this.enableLeaveEvent) {\n        if (event.type === 'mouseleave') {\n          this.callback({\n            type: LEAVE_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleMoveEvent\",\n    value: function handleMoveEvent(event) {\n      if (this.enableMoveEvent) {\n        switch (event.type) {\n          case 'mousedown':\n            if (event.button >= 0) {\n              // Button is down\n              this.pressed = true;\n            }\n\n            break;\n\n          case 'mousemove':\n            // Move events use `which` to track the button being pressed\n            if (event.which === 0) {\n              // Button is not down\n              this.pressed = false;\n            }\n\n            if (!this.pressed) {\n              // Drag events are emitted by hammer already\n              // we just need to emit the move event on hover\n              this.callback({\n                type: MOVE_EVENT_TYPE,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n              });\n            }\n\n            break;\n\n          case 'mouseup':\n            this.pressed = false;\n            break;\n\n          default:\n        }\n      }\n    }\n  }]);\n\n  return MoveInput;\n}();\n\nexport { MoveInput as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar KEY_EVENTS = INPUT_EVENT_TYPES.KEY_EVENTS;\nvar DOWN_EVENT_TYPE = 'keydown';\nvar UP_EVENT_TYPE = 'keyup';\n\nvar KeyInput =\n/*#__PURE__*/\nfunction () {\n  function KeyInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, KeyInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n    this.events = KEY_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.tabIndex = 1;\n    element.style.outline = 'none';\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(KeyInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === DOWN_EVENT_TYPE) {\n        this.enableDownEvent = enabled;\n      }\n\n      if (eventType === UP_EVENT_TYPE) {\n        this.enableUpEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      // Ignore if focused on text input\n      var targetElement = event.target || event.srcElement;\n\n      if (targetElement.tagName === 'INPUT' && targetElement.type === 'text' || targetElement.tagName === 'TEXTAREA') {\n        return;\n      }\n\n      if (this.enableDownEvent && event.type === 'keydown') {\n        this.callback({\n          type: DOWN_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n\n      if (this.enableUpEvent && event.type === 'keyup') {\n        this.callback({\n          type: UP_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n    }\n  }]);\n\n  return KeyInput;\n}();\n\nexport { KeyInput as default };","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nvar EVENT_TYPE = 'contextmenu';\n\nvar ContextmenuInput =\n/*#__PURE__*/\nfunction () {\n  function ContextmenuInput(element, callback) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, ContextmenuInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  _createClass(ContextmenuInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      this.callback({\n        type: EVENT_TYPE,\n        center: {\n          x: event.clientX,\n          y: event.clientY\n        },\n        srcEvent: event,\n        pointerType: 'mouse',\n        target: event.target\n      });\n    }\n  }]);\n\n  return ContextmenuInput;\n}();\n\nexport { ContextmenuInput as default };","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\n\n/* Constants */\nvar DOWN_EVENT = 1;\nvar MOVE_EVENT = 2;\nvar UP_EVENT = 4;\nvar MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n}; // MouseEvent.which https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\nvar MOUSE_EVENT_WHICH_LEFT = 1;\nvar MOUSE_EVENT_WHICH_MIDDLE = 2;\nvar MOUSE_EVENT_WHICH_RIGHT = 3; // MouseEvent.button https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n\nvar MOUSE_EVENT_BUTTON_LEFT = 0;\nvar MOUSE_EVENT_BUTTON_MIDDLE = 1;\nvar MOUSE_EVENT_BUTTON_RIGHT = 2; // MouseEvent.buttons https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\nvar MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nvar MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nvar MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\n/**\n * Extract the involved mouse button\n */\n\nexport function whichButtons(event) {\n  var eventType = MOUSE_EVENTS[event.srcEvent.type];\n\n  if (!eventType) {\n    // Not a mouse evet\n    return null;\n  }\n\n  var _event$srcEvent = event.srcEvent,\n      buttons = _event$srcEvent.buttons,\n      button = _event$srcEvent.button,\n      which = _event$srcEvent.which;\n  var leftButton = false;\n  var middleButton = false;\n  var rightButton = false;\n\n  if ( // button is up, need to find out which one was pressed before\n  eventType === UP_EVENT || // moving but does not support `buttons` API\n  eventType === MOVE_EVENT && !Number.isFinite(buttons)) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {\n    leftButton: leftButton,\n    middleButton: middleButton,\n    rightButton: rightButton\n  };\n}\n/**\n * Calculate event position relative to the root element\n */\n\nexport function getOffsetPosition(event, rootElement) {\n  var srcEvent = event.srcEvent; // `center` is a hammer.js event property\n\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    // Not a gestural event\n    return null;\n  }\n\n  var center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n  var rect = rootElement.getBoundingClientRect(); // Fix scale for map affected by a CSS transform.\n  // See https://stackoverflow.com/a/26893663/3528533\n\n  var scaleX = rect.width / rootElement.offsetWidth;\n  var scaleY = rect.height / rootElement.offsetHeight; // Calculate center relative to the root element\n\n  var offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n  return {\n    center: center,\n    offsetCenter: offsetCenter\n  };\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { whichButtons, getOffsetPosition } from './event-utils';\n\nvar EventRegistrar =\n/*#__PURE__*/\nfunction () {\n  function EventRegistrar(eventManager) {\n    _classCallCheck(this, EventRegistrar);\n\n    this.eventManager = eventManager;\n    this.handlers = []; // Element -> handler map\n\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n  }\n\n  _createClass(EventRegistrar, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this.handlers.length === 0;\n    }\n  }, {\n    key: \"add\",\n    value: function add(type, handler) {\n      var srcElement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'root';\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      if (!handlersByElement.has(srcElement)) {\n        handlersByElement.set(srcElement, []);\n      }\n\n      var entry = {\n        type: type,\n        handler: handler,\n        srcElement: srcElement\n      };\n      handlers.push(entry);\n      handlersByElement.get(srcElement).push(entry);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(type, handler) {\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      for (var i = handlers.length - 1; i >= 0; i--) {\n        var entry = handlers[i];\n\n        if (entry.type === type && entry.handler === handler) {\n          handlers.splice(i, 1);\n          var entries = handlersByElement.get(entry.srcElement);\n          entries.splice(entries.indexOf(entry), 1);\n\n          if (entries.length === 0) {\n            handlersByElement[\"delete\"](entry.srcElement);\n          }\n        }\n      }\n    }\n    /**\n     * Handles hammerjs event\n     */\n\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (this.isEmpty()) {\n        return;\n      }\n\n      var mjolnirEvent = this._normalizeEvent(event);\n\n      var target = event.srcEvent.target;\n\n      while (target && target !== mjolnirEvent.rootElement) {\n        this._emit(mjolnirEvent, target);\n\n        if (mjolnirEvent.handled) {\n          return;\n        }\n\n        target = target.parentNode;\n      }\n\n      this._emit(mjolnirEvent, 'root');\n    }\n    /**\n     * Invoke handlers on a particular element\n     */\n\n  }, {\n    key: \"_emit\",\n    value: function _emit(event, srcElement) {\n      var entries = this.handlersByElement.get(srcElement);\n\n      if (entries) {\n        var immediatePropagationStopped = false; // Prevents the current event from bubbling up\n\n        var stopPropagation = function stopPropagation() {\n          event.handled = true;\n        }; // Prevent any remaining listeners from being called\n\n\n        var stopImmediatePropagation = function stopImmediatePropagation() {\n          event.handled = true;\n          immediatePropagationStopped = true;\n        };\n\n        for (var i = 0; i < entries.length; i++) {\n          var _entries$i = entries[i],\n              type = _entries$i.type,\n              handler = _entries$i.handler;\n          handler(Object.assign({}, event, {\n            type: type,\n            stopPropagation: stopPropagation,\n            stopImmediatePropagation: stopImmediatePropagation\n          }));\n\n          if (immediatePropagationStopped) {\n            break;\n          }\n        }\n      }\n    }\n    /**\n     * Normalizes hammerjs and custom events to have predictable fields.\n     */\n\n  }, {\n    key: \"_normalizeEvent\",\n    value: function _normalizeEvent(event) {\n      var rootElement = this.eventManager.element;\n      return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n        handled: false,\n        rootElement: rootElement\n      });\n    }\n  }]);\n\n  return EventRegistrar;\n}();\n\nexport { EventRegistrar as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es6.object.assign\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport Hammer from './utils/hammer';\nimport HammerManagerMock from './utils/hammer-manager-mock';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nvar DEFAULT_OPTIONS = {\n  // event handlers\n  events: null,\n  // custom recognizers\n  recognizers: null,\n  recognizerOptions: {},\n  // Manager class\n  Manager: Hammer ? Hammer.Manager : HammerManagerMock,\n  // allow browser default touch action\n  // https://github.com/uber/react-map-gl/issues/506\n  touchAction: 'none'\n}; // Unified API for subscribing to events about both\n// basic input events (e.g. 'mousemove', 'touchstart', 'wheel')\n// and gestural input (e.g. 'click', 'tap', 'panstart').\n// Delegates gesture related event registration and handling to Hammer.js.\n\nvar EventManager =\n/*#__PURE__*/\nfunction () {\n  function EventManager() {\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, EventManager);\n\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n    this.setElement(element); // Register all passed events.\n\n    var events = options.events;\n\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  _createClass(EventManager, [{\n    key: \"setElement\",\n    value: function setElement(element) {\n      var _this = this;\n\n      if (this.element) {\n        // unregister all events\n        this.destroy();\n      }\n\n      this.element = element;\n\n      if (!element) {\n        return;\n      }\n\n      var options = this.options;\n      var ManagerClass = options.Manager;\n      this.manager = new ManagerClass(element, {\n        touchAction: options.touchAction,\n        recognizers: options.recognizers || RECOGNIZERS\n      }).on('hammer.input', this._onBasicInput);\n\n      if (!options.recognizers) {\n        // Set default recognize withs\n        // http://hammerjs.github.io/recognize-with/\n        Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(function (name) {\n          var recognizer = _this.manager.get(name);\n\n          if (recognizer) {\n            RECOGNIZER_COMPATIBLE_MAP[name].forEach(function (otherName) {\n              recognizer.recognizeWith(otherName);\n            });\n          }\n        });\n      } // Set recognizer options\n\n\n      for (var recognizerName in options.recognizerOptions) {\n        var recognizer = this.manager.get(recognizerName);\n\n        if (recognizer) {\n          var recognizerOption = options.recognizerOptions[recognizerName]; // `enable` is managed by the event registrations\n\n          delete recognizerOption.enable;\n          recognizer.set(recognizerOption);\n        }\n      } // Handle events not handled by Hammer.js:\n      // - mouse wheel\n      // - pointer/touch/mouse move\n\n\n      this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.moveInput = new MoveInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.keyInput = new KeyInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n        enable: false\n      }); // Register all existing events\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.events[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              eventAlias = _step$value[0],\n              eventRegistrar = _step$value[1];\n\n          if (!eventRegistrar.isEmpty()) {\n            // Enable recognizer for this event.\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n            this.manager.on(eventAlias, eventRegistrar.handleEvent);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    } // Tear down internal event management implementations.\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.element) {\n        // wheelInput etc. are created in setElement() and therefore\n        // cannot exist if there is no element\n        this.wheelInput.destroy();\n        this.moveInput.destroy();\n        this.keyInput.destroy();\n        this.contextmenuInput.destroy();\n        this.manager.destroy();\n        this.wheelInput = null;\n        this.moveInput = null;\n        this.keyInput = null;\n        this.contextmenuInput = null;\n        this.manager = null;\n        this.element = null;\n      }\n    } // Register an event handler function to be called on `event`.\n\n  }, {\n    key: \"on\",\n    value: function on(event, handler, srcElement) {\n      if (typeof event === 'string') {\n        this._addEventHandler(event, handler, srcElement);\n      } else {\n        srcElement = handler; // If `event` is a map, call `on()` for each entry.\n\n        for (var eventName in event) {\n          this._addEventHandler(eventName, event[eventName], srcElement);\n        }\n      }\n    }\n    /**\n     * Deregister a previously-registered event handler.\n     * @param {string|Object} event   An event name (String) or map of event names to handlers\n     * @param {Function} [handler]    The function to be called on `event`.\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(event, handler) {\n      if (typeof event === 'string') {\n        this._removeEventHandler(event, handler);\n      } else {\n        // If `event` is a map, call `off()` for each entry.\n        for (var eventName in event) {\n          this._removeEventHandler(eventName, event[eventName]);\n        }\n      }\n    }\n    /*\n     * Enable/disable recognizer for the given event\n     */\n\n  }, {\n    key: \"_toggleRecognizer\",\n    value: function _toggleRecognizer(name, enabled) {\n      var manager = this.manager;\n\n      if (!manager) {\n        return;\n      }\n\n      var recognizer = manager.get(name);\n\n      if (recognizer && recognizer.options.enable !== enabled) {\n        recognizer.set({\n          enable: enabled\n        });\n        var fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n\n        if (fallbackRecognizers && !this.options.recognizers) {\n          // Set default require failures\n          // http://hammerjs.github.io/require-failure/\n          fallbackRecognizers.forEach(function (otherName) {\n            var otherRecognizer = manager.get(otherName);\n\n            if (enabled) {\n              // Wait for this recognizer to fail\n              otherRecognizer.requireFailure(name);\n              /**\n               * This seems to be a bug in hammerjs:\n               * requireFailure() adds both ways\n               * dropRequireFailure() only drops one way\n               * https://github.com/hammerjs/hammer.js/blob/master/src/recognizerjs/\n                 recognizer-constructor.js#L136\n               */\n\n              recognizer.dropRequireFailure(otherName);\n            } else {\n              // Do not wait for this recognizer to fail\n              otherRecognizer.dropRequireFailure(name);\n            }\n          });\n        }\n      }\n\n      this.wheelInput.enableEventType(name, enabled);\n      this.moveInput.enableEventType(name, enabled);\n      this.keyInput.enableEventType(name, enabled);\n      this.contextmenuInput.enableEventType(name, enabled);\n    }\n    /**\n     * Process the event registration for a single event + handler.\n     */\n\n  }, {\n    key: \"_addEventHandler\",\n    value: function _addEventHandler(event, handler, srcElement) {\n      var manager = this.manager,\n          events = this.events; // Alias to a recognized gesture as necessary.\n\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        eventRegistrar = new EventRegistrar(this);\n        events.set(eventAlias, eventRegistrar); // Enable recognizer for this event.\n\n        eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias; // Listen to the event\n\n        if (manager) {\n          manager.on(eventAlias, eventRegistrar.handleEvent);\n        }\n      }\n\n      this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n      eventRegistrar.add(event, handler, srcElement);\n    }\n    /**\n     * Process the event deregistration for a single event + handler.\n     */\n\n  }, {\n    key: \"_removeEventHandler\",\n    value: function _removeEventHandler(event, handler) {\n      var events = this.events; // Alias to a recognized gesture as necessary.\n\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        return;\n      }\n\n      eventRegistrar.remove(event, handler);\n\n      if (eventRegistrar.isEmpty()) {\n        var recognizerName = eventRegistrar.recognizerName; // Disable recognizer if no more handlers are attached to its events\n\n        var isRecognizerUsed = false;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = events.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var eh = _step2.value;\n\n            if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n              isRecognizerUsed = true;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (!isRecognizerUsed) {\n          this._toggleRecognizer(recognizerName, false);\n        }\n      }\n    }\n    /**\n     * Handle basic events using the 'hammer.input' Hammer.js API:\n     * Before running Recognizers, Hammer emits a 'hammer.input' event\n     * with the basic event info. This function emits all basic events\n     * aliased to the \"class\" of event received.\n     * See constants.BASIC_EVENT_CLASSES basic event class definitions.\n     */\n\n  }, {\n    key: \"_onBasicInput\",\n    value: function _onBasicInput(event) {\n      var srcEvent = event.srcEvent;\n      var alias = BASIC_EVENT_ALIASES[srcEvent.type];\n\n      if (alias) {\n        // fire all events aliased to srcEvent.type\n        this.manager.emit(alias, event);\n      }\n    }\n    /**\n     * Handle events not supported by Hammer.js,\n     * and pipe back out through same (Hammer) channel used by other events.\n     */\n\n  }, {\n    key: \"_onOtherEvent\",\n    value: function _onOtherEvent(event) {\n      // console.log('onotherevent', event.type, event)\n      this.manager.emit(event.type, event);\n    }\n  }]);\n\n  return EventManager;\n}();\n\nexport { EventManager as default };","// Hammer.Manager mock for use in environments without `document` / `window`.\nexport default function HammerManagerMock(m) {\n  var instance = {};\n\n  var chainedNoop = function chainedNoop() {\n    return instance;\n  };\n\n  instance.get = function () {\n    return null;\n  };\n\n  instance.set = chainedNoop;\n  instance.on = chainedNoop;\n  instance.off = chainedNoop;\n  instance.destroy = chainedNoop;\n  instance.emit = chainedNoop;\n  return instance;\n}","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nexport { default as EventManager } from './event-manager';","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };"],"sourceRoot":""}