{"version":3,"sources":["webpack:///../modules/core/src/scenegraph/nodes/model-node.js","webpack:///../examples/lessons/09/star.js","webpack:///../examples/lessons/09/app.js","webpack:///./templates/lessons/example-09.jsx","webpack:///../modules/core/src/scenegraph/nodes/scenegraph-node.js","webpack:///../node_modules/math.gl/dist/esm/classes/base/vector.js","webpack:///../node_modules/math.gl/dist/esm/classes/vector3.js"],"names":["ModelNode","props","gl","setProps","this","_setModelNodeProps","delete","model","managedResources","forEach","resource","draw","setUniforms","setAttributes","updateModuleSettings","ScenegraphNode","VERTEX_SHADER","FRAGMENT_SHADER","Star","opts","program","fs","vs","geometry","attributes","positions","Float32Array","texCoords","indices","Uint16Array","uniforms","uSampler","texture","onBeforeRender","r","g","b","uColor","randomiseColors","rd","Math","twinklerR","twinklerG","twinklerB","animate","angle","rotationSpeed","dist","position","set","setRotation","spin","updateMatrix","zoom","tilt","AppAnimationLoop","getInfo","onInitialize","canvas","document","setParameters","clearColor","clearDepth","blendFunc","blend","stars","i","startingDistance","onRender","aspect","tick","radTilt","cameraY","cameraZ","GL","uMVMatrix","eye","uPMatrix","onFinalize","AnimationLoop","keyboardEventHandler","e","window","animationLoop","Example","render","exampleConfig","pageContext","React","Component","id","uid","constructor","display","rotation","scale","matrix","userData","_setScenegraphNodeProps","toString","setPosition","assert","setScale","setMatrix","copyMatrix","copy","setMatrixComponents","update","pos","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","Object","_MathArray","Vector","apply","arguments","key","value","sqrt","lengthSquared","len","length","ELEMENTS","mathArray","distanceSquared","product","magnitude","check","_len","vectors","Array","_key","_i","_vectors","vector","_len2","_key2","_i2","_vectors2","distance","a","add","subtract","multiply","multiplyScalar","get","ORIGIN","_Vector","Vector3","_this","x","undefined","y","z","call","debug","array","object","vec3","_ref","radians","_ref$origin","origin","_ref2","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","quaternion"],"mappings":"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","file":"component---templates-lessons-example-09-jsx-64617f65a21a5dd2b9c8.js","sourcesContent":["import Model from '../../lib/model';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import {Program, Geometry, ModelNode} from '@luma.gl/core';\n\nconst VERTEX_SHADER = `\\\nattribute vec3 positions;\nattribute vec2 texCoords;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * vec4(positions, 1.0);\n  vTextureCoord = texCoords;\n}\n`;\n\nconst FRAGMENT_SHADER = `\\\nprecision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec3 uColor;\n\nvoid main(void) {\n  vec4 textureColor = vec4(texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t)).rgb, 1.0);\n  gl_FragColor = textureColor * vec4(uColor, 1.0);\n}\n`;\n\nexport class Star extends ModelNode {\n  constructor(gl, opts = {}) {\n    const program = new Program(gl, {\n      fs: FRAGMENT_SHADER,\n      vs: VERTEX_SHADER\n    });\n\n    super(gl, {\n      program,\n      geometry: new Geometry({\n        attributes: {\n          // prettier-ignore\n          positions: new Float32Array([\n            -1.0, -1.0, 0.0,\n            1.0, -1.0, 0.0,\n            -1.0, 1.0, 0.0,\n            1.0, 1.0, 0.0\n          ]),\n          // prettier-ignore\n          texCoords: new Float32Array([\n            0.0, 0.0,\n            1.0, 0.0,\n            0.0, 1.0,\n            1.0, 1.0\n          ]),\n          indices: new Uint16Array([0, 1, 3, 3, 2, 0])\n        }\n      }),\n      uniforms: {\n        uSampler: opts.texture\n      },\n      onBeforeRender: () => {\n        // TODO: Fix this so user can control this with a check-box\n        const isTwinkle = false; // twinkle.checked;\n        const r = isTwinkle ? Math.min(1, this.r + this.twinklerR) : this.r;\n        const g = isTwinkle ? Math.min(1, this.g + this.twinklerG) : this.g;\n        const b = isTwinkle ? Math.min(1, this.b + this.twinklerB) : this.b;\n        this.setUniforms({uColor: [r, g, b]});\n      }\n    });\n\n    this.angle = 0;\n    this.dist = opts.startingDistance;\n    this.rotationSpeed = opts.rotationSpeed;\n    this.spin = 0;\n\n    this.randomiseColors();\n  }\n\n  randomiseColors() {\n    const rd = Math.random;\n\n    this.r = rd();\n    this.g = rd();\n    this.b = rd();\n\n    this.twinklerR = rd();\n    this.twinklerG = rd();\n    this.twinklerB = rd();\n  }\n\n  animate(elapsedTime, twinkle) {\n    this.angle += this.rotationSpeed / 10;\n    this.dist -= 0.001;\n\n    if (this.dist < 0) {\n      this.dist += 5;\n      this.randomiseColors();\n    }\n\n    this.position.set(Math.cos(this.angle) * this.dist, Math.sin(this.angle) * this.dist, 0);\n    this.setRotation([0, 0, this.spin]);\n    this.spin += 0.1;\n    this.updateMatrix();\n  }\n}\n","import GL from '@luma.gl/constants';\nimport {AnimationLoop, Texture2D, setParameters} from '@luma.gl/core';\nimport {Matrix4} from 'math.gl';\nimport {Star} from './star';\n\nconst INFO_HTML = `\n<p>\n  <a href=\"http://learningwebgl.com/blog/?p=1008\" target=\"_blank\">\n    Improving the code structure with lots of moving objects\n  </a>\n  Up/Down/PageUp/PageDown to tilt and zoom.\n<p>\nThe classic WebGL Lessons in luma.gl\n`;\n\nlet zoom = -15;\nlet tilt = 90;\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  onInitialize({canvas, gl}) {\n    /* global document */\n    document.addEventListener('keydown', keyboardEventHandler);\n\n    setParameters(gl, {\n      clearColor: [0, 0, 0, 1],\n      clearDepth: 1,\n      blendFunc: [gl.SRC_ALPHA, gl.ONE],\n      blend: true\n    });\n\n    const texture = new Texture2D(gl, 'star.gif');\n\n    const stars = [];\n    const numStars = 50;\n    for (let i = 0; i < numStars; i++) {\n      stars.push(\n        new Star(gl, {\n          startingDistance: (i / numStars) * 5.0,\n          rotationSpeed: i / numStars,\n          texture\n        })\n      );\n    }\n\n    return {stars};\n  }\n\n  onRender({gl, tick, aspect, stars}) {\n    // Update Camera Position\n    const radTilt = (tilt / 180) * Math.PI;\n    const cameraY = Math.cos(radTilt) * zoom;\n    const cameraZ = Math.sin(radTilt) * zoom;\n\n    gl.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);\n\n    for (const i in stars) {\n      const uMVMatrix = new Matrix4()\n        .lookAt({eye: [0, cameraY, cameraZ]})\n        .multiplyRight(stars[i].matrix);\n\n      stars[i]\n        .setUniforms({\n          uMVMatrix,\n          uPMatrix: new Matrix4().perspective({aspect})\n        })\n        .draw();\n      stars[i].animate();\n    }\n  }\n\n  onFinalize() {\n    document.removeEventListener('keydown', keyboardEventHandler);\n  }\n}\n\nfunction keyboardEventHandler(e) {\n  switch (e.code) {\n    case 'ArrowUp':\n      tilt -= 1.5;\n      break;\n    case 'ArrowDown':\n      tilt += 1.5;\n      break;\n    case 'PageUp':\n      zoom -= 0.1;\n      break;\n    case 'PageDown':\n      zoom += 0.1;\n      break;\n    default:\n  }\n}\n\n/* global window */\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/lessons/09/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '../../utils';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };"],"sourceRoot":""}