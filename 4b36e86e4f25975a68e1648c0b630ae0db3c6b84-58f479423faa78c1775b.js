(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{bjw9:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));i("E5k/"),i("YBKJ"),i("6kNP"),i("8npG");var n=i("o0o1"),r=i.n(n),s=(i("wcNg"),i("lHlH")),a=i("JR+K"),o=i("Iq2B"),u=(i("ofTv"),i("YbXK"),i("cFtU"),i("pJf4"),i("q8oJ"),i("rzGZ"),i("m210"),i("4DPX"),i("98Cc")),l=i("dTJe"),h=i("2aL3");function c(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var m=function(e){var t,i;function n(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.isSupported=function(e,t){void 0===t&&(t=[]);for(var i,n=Object(s.e)(e),r=Object(l.c)(e,h.a.TIMER_QUERY),a=n||r,u=c(t);!(i=u()).done;){switch(i.value){case"queries":a=a&&n;break;case"timers":a=a&&r;break;default:Object(o.a)(!1)}}return a};var r=n.prototype;return r.beginTimeElapsedQuery=function(){return this.begin(35007)},r.beginOcclusionQuery=function(e){var t=(void 0===e?{}:e).conservative,i=void 0!==t&&t;return this.begin(i?36202:35887)},r.beginTransformFeedbackQuery=function(){return this.begin(35976)},r.begin=function(e){return this._queryPending||(this.target=e,this.gl.beginQuery(this.target,this.handle)),this},r.end=function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this},r.isResultAvailable=function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e},r.isTimerDisjoint=function(){return this.gl.getParameter(36795)},r.getResult=function(){return this.gl.getQueryParameter(this.handle,34918)},r.getTimerMilliseconds=function(){return this.getResult()/1e6},r.createPoll=function(e){var t=this;if(void 0===e&&(e=Number.POSITIVE_INFINITY),this._pollingPromise)return this._pollingPromise;var i=0;return this._pollingPromise=new Promise((function(n,r){requestAnimationFrame((function s(){t.isResultAvailable()?(n(t.getResult()),t._pollingPromise=null):i++>e?(r("Timed out"),t._pollingPromise=null):requestAnimationFrame(s)}))})),this._pollingPromise},r._createHandle=function(){return n.isSupported(this.gl)?this.gl.createQuery():null},r._deleteHandle=function(){this.gl.deleteQuery(this.handle)},n}(u.a);function f(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var p=i("mECX"),g=i("QenK");function v(e,t,i,n,r,s,a){try{var o=e[s](a),u=o.value}catch(l){return void i(l)}o.done?t(u):Promise.resolve(u).then(n,r)}var _=Object(g.isBrowser)()&&"undefined"!=typeof document,w=0,P=function(){function e(e){void 0===e&&(e={});var t=e,i=t.onCreateContext,n=void 0===i?function(e){return Object(s.a)(e)}:i,r=t.onAddHTML,o=void 0===r?null:r,u=t.onInitialize,l=void 0===u?function(){}:u,h=t.onRender,c=void 0===h?function(){}:h,d=t.onFinalize,m=void 0===d?function(){}:d,f=t.onError,p=t.gl,g=void 0===p?null:p,v=t.glOptions,_=void 0===v?{}:v,P=t.debug,b=void 0!==P&&P,y=t.createFramebuffer,F=void 0!==y&&y,R=t.autoResizeViewport,T=void 0===R||R,D=t.autoResizeDrawingBuffer,z=void 0===D||D,x=t.stats,C=void 0===x?a.a.get("animation-loop-"+w++):x,A=e.useDevicePixels,L=void 0===A||A;"useDevicePixelRatio"in e&&(s.f.deprecated("useDevicePixelRatio","useDevicePixels")(),L=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:o,onInitialize:l,onRender:c,onFinalize:m,onError:f,gl:g,glOptions:_,debug:b,createFramebuffer:F},this.gl=g,this.needsRedraw=null,this.timeline=null,this.stats=C,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:T,autoResizeDrawingBuffer:z,useDevicePixels:L}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var t=e.prototype;return t.delete=function(){this.stop(),this._setDisplay(null)},t.setNeedsRedraw=function(e){return Object(o.a)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this},t.setProps=function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this},t.start=function(e){var t=this;if(void 0===e&&(e={}),this._running)return this;this._running=!0;var i=this._getPageLoadPromise().then((function(){return!t._running||t._initialized?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t._gpuTimeQuery=m.isSupported(t.gl,["timers"])?new m(t.gl):null,t._initialized=!0,t.onInitialize(t.animationProps))})).then((function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}));return this.props.onError&&i.catch(this.props.onError),this},t.redraw=function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this},t.stop=function(){return this._running&&(this._finalizeCallbackData(),f(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this},t.attachTimeline=function(e){return this.timeline=e,this.timeline},t.detachTimeline=function(){this.timeline=null},t.waitForRender=function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(t){e._resolveNextFrame=t}))),this._nextFramePromise},t.toDataURL=function(){var e,t=(e=r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function a(e){v(s,n,r,a,o,"next",e)}function o(e){v(s,n,r,a,o,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),t.onCreateContext=function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)},t.onInitialize=function(){var e;return(e=this.props).onInitialize.apply(e,arguments)},t.onRender=function(){var e;return(e=this.props).onRender.apply(e,arguments)},t.onFinalize=function(){var e;return(e=this.props).onFinalize.apply(e,arguments)},t.getHTMLControlValue=function(e,t){void 0===t&&(t=1);var i=document.getElementById(e);return i?Number(i.value):t},t.setViewParameters=function(){return s.f.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this},t._startLoop=function(){var e=this;f(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))}))},t._getPageLoadPromise=function(){return this._pageLoadPromise||(this._pageLoadPromise=_?new Promise((function(e,t){_&&"complete"===document.readyState?e(document):window.addEventListener("load",(function(){e(document)}))})):Promise.resolve({})),this._pageLoadPromise},t._setDisplay=function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e},t._requestAnimationFrame=function(e){var t;this.display&&this.display.requestAnimationFrame(e)||(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60))},t._renderFrame=function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)},t._clearNeedsRedraw=function(){this.needsRedraw=null},t._setupFrame=function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())},t._initializeCallbackData=function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}},t._updateCallbackData=function(){var e=this._getSizeAndAspect(),t=e.width,i=e.height,n=e.aspect;t===this.animationProps.width&&i===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=i,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen},t._finalizeCallbackData=function(){this.onFinalize(this.animationProps)},t._addCallbackData=function(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))},t._createWebGLContext=function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Object(s.c)(this.props.gl,e):this.onCreateContext(e),!Object(s.d)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(s.h)(this.gl),this._createInfoDiv()},t._createInfoDiv=function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}},t._getSizeAndAspect=function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,i=1,n=this.gl.canvas;return n&&n.clientHeight?i=n.clientWidth/n.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}},t._resizeViewport=function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)},t._resizeCanvasDrawingBuffer=function(){this.autoResizeDrawingBuffer&&Object(s.i)(this.gl,{useDevicePixels:this.useDevicePixels})},t._createFramebuffer=function(){this.props.createFramebuffer&&(this.framebuffer=new p.a(this.gl))},t._resizeFramebuffer=function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})},t._beginTimers=function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()},t._endTimers=function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()},t._startEventHandling=function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))},t._onMousemove=function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]},t._onMouseleave=function(e){this.animationProps._mousePosition=null},e}()}}]);